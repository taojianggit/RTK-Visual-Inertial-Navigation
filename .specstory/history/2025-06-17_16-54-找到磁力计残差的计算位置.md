<!-- Generated by SpecStory -->

# ÊâæÂà∞Á£ÅÂäõËÆ°ÊÆãÂ∑ÆÁöÑËÆ°ÁÆó‰ΩçÁΩÆ (2025-06-18 00:54:45)

_**User**_

ÊâæÂà∞Á£ÅÂäõËÆ°ÊÆãÂ∑ÆÁöÑËÆ°ÁÆó‰ΩçÁΩÆ

---

_**Assistant**_



---

ÊàëÊù•Â∏ÆÊÇ®ÊâæÂà∞Á£ÅÂäõËÆ°ÊÆãÂ∑ÆÁöÑËÆ°ÁÆó‰ΩçÁΩÆ„ÄÇÈ¶ñÂÖàËÆ©ÊàëÊé¢Á¥¢‰∏Ä‰∏ãËøô‰∏™RTKËßÜËßâÊÉØÊÄßÂØºËà™‰ª£Á†ÅÂ∫ìÁöÑÁªìÊûÑ„ÄÇ

---

<details>
            <summary>Listed current directory ‚Ä¢ **16** results</summary>
        
| Name |
|-------|
| üìÅ `.git` |
| üìÅ `yaml` |
| üìÅ `evaluate` |
| üìÑ `weight_calculation_example.py` |
| üìÑ `test_weight_visualization.py` |
| üìÑ `test_reproj_filter.py` |
| üìÅ `.vscode` |
| üìÑ `.gitignore` |
| üìÑ `.cursorindexingignore` |
| üìÅ `.specstory` |
| üìÅ `ceres-solver-modified` |
| üìÅ `rtk_visual_inertial_src` |
| üìÅ `fig` |
| üìÑ `ceres-solver-modified.tar` |
| üìÑ `LICENSE` |
| üìÑ `README.md` |

</details>

---

ËÆ©ÊàëÊü•Áúã‰∏ªË¶ÅÁöÑÊ∫ê‰ª£Á†ÅÁõÆÂΩïÔºö

---

<details>
            <summary>Listed directory rtk_visual_inertial_src ‚Ä¢ **2** results</summary>
        
| Name |
|-------|
| üìÅ `rtk_visual_inertial` |
| üìÅ `camera_models` |

</details>

---

<details>
            <summary>Listed directory rtk_visual_inertial_src/rtk_visual_inertial ‚Ä¢ **5** results</summary>
        
| Name |
|-------|
| üìÑ `CMakeLists.txt` |
| üìÅ `src` |
| üìÅ `config` |
| üìÅ `launch` |
| üìÑ `package.xml` |

</details>

---

Áé∞Âú®ËÆ©ÊàëÊü•ÁúãÊ∫ê‰ª£Á†ÅÁõÆÂΩïÔºåÂêåÊó∂ÊêúÁ¥¢‰∏éÁ£ÅÂäõËÆ°Áõ∏ÂÖ≥ÁöÑ‰ª£Á†ÅÔºö

---

<details>
            <summary>Listed directory rtk_visual_inertial_src/rtk_visual_inertial/src ‚Ä¢ **7** results</summary>
        
| Name |
|-------|
| üìÅ `swf` |
| üìÅ `feature` |
| üìÅ `utility` |
| üìÅ `factor` |
| üìÑ `main3.cpp` |
| üìÅ `parameter` |
| üìÅ `gnss` |

</details>

---

<details>
            <summary>Searched codebase "magnetometer residual calculation" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.cpp` | L1-49 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.h` | L1-17 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/utility/visualization.cpp` | L330-362 |
| `evaluate/imu_residual/analyzeIMUPositionResidual.py` | L52-79 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp` | L214-253 |
| `evaluate/imu_residual/analyzeReprojectionError.py` | L52-79 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/imu_factor.cpp` | L17-57 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/utility/visualization.cpp` | L300-330 |
| `evaluate/imu_residual/analyzeIMUPositionResidual.py` | L681-697 |
| `evaluate/imu_residual/evaluateResidualSqrted.py` | L1-47 |
| `evaluate/imu_residual/residual_correlation_analyzer.py` | L87-113 |
| `evaluate/imu_residual/evaluateResidualSqrted.py` | L212-223 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L412-443 |
| `evaluate/reprojection_error/analyzeReprojectionError.py` | L49-86 |
| `evaluate/imu_residual/evaluateResidualUnsqrted.py` | L212-223 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/integration_base.cpp` | L142-174 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L32-65 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L1-50 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/imu_factor.cpp` | L130-170 |
| `evaluate/imu_residual/evaluateResidualUnsqrted.py` | L252-313 |
| `evaluate/imu_residual/evaluateResidualSqrted.py` | L252-313 |
| `evaluate/imu_residual/evaluateResidualUnsqrted.py` | L1-48 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf.h` | L224-261 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L267-298 |
| `evaluate/imu_residual/simple_analyzer.py` | L44-78 |

</details>

---

<details>
            <summary>Grep search for "mag|magnetometer|residual" ‚Ä¢ **5** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/LICENSE` | L603 | `THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/LICENSE` | L604 | `GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/LICENSE` | L609 | `SUCH DAMAGES.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L88 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.cpp` | L2-33 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L167 | `residual = (pts_camera_j / dep_j).head<2>() - pts.head<2>();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L173 | `- `residual` ÊòØ‰∏§ËÄÖ‰πãÈó¥ÁöÑÂ∑ÆÂÄº` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L232 | `residual = (pts_camera_j / dep_j).head<2>() - pts.head<2>();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L235 | `-     Eigen::Vector2d raw_reproj_error = residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L237 | `+     Eigen::Vector2d raw_reproj_error = residual * FOCAL_LENGTH;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L239 | `residual = sqrt_info * residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L243 | `residual = (pts_camera_j / dep_j).head<2>() - pts_j.head<2>();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L246 | `-     Eigen::Vector2d raw_reproj_error = residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L248 | `+     Eigen::Vector2d raw_reproj_error = residual * FOCAL_LENGTH;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L250 | `residual = sqrt_info * residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L254 | `residual = (pts_camera_j / dep_j).head<2>() - pts_j.head<2>();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L257 | `-     Eigen::Vector2d raw_reproj_error = residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L259 | `+     Eigen::Vector2d raw_reproj_error = residual * FOCAL_LENGTH;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L261 | `residual = sqrt_info * residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L265 | `residual = (pts_camera_j / dep_j).head<2>() - pts_j.head<2>();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L268 | `-     Eigen::Vector2d raw_reproj_error = residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L270 | `+     Eigen::Vector2d raw_reproj_error = residual * FOCAL_LENGTH;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L272 | `residual = sqrt_info * residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L314 | `Eigen::Vector2d raw_reproj_error = residual;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L319 | `Eigen::Vector2d raw_reproj_error = residual * FOCAL_LENGTH;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L335 | `/home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp: In member function ‚Äòvoid SWFOptimization::MyOptimization()‚Äô:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L336 | `/home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp:202:20: error: ‚ÄòsetCurrentTimestamp‚Äô is not a member of ‚ÄòIMUFactor‚Äô` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L349 | `ÊàëÈúÄË¶ÅÊü•ÁúãËøô‰∏™ÁºñËØëÈîôËØØ„ÄÇËÆ©ÊàëÂÖàÊ£ÄÊü•`swf_image.cpp`Êñá‰ª∂‰∏≠ÁöÑÁ¨¨202Ë°åÔºåÁÑ∂ÂêéÊü•Áúã`IMUFactor`ÁöÑÂÆö‰πâÊù•ÁêÜËß£ÈóÆÈ¢ò„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L353 | `Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L406 | `Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L454 | `-     if (rover_count + image_count > 0) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L455 | `-         double current_time = headers[rover_count + image_count - 1];` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L472 | `if (rover_count + image_count > 0) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_04-28-%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E7%9A%84%E5%90%88%E7%90%86%E6%80%A7%E5%8F%8A%E5%8D%95%E4%BD%8D.md` | L473 | `double current_time = headers[rover_count + image_count - 1];` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L27 | `if matched_residuals:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L28 | `residual_df = pd.DataFrame(matched_residuals)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L40 | `+         if save_residual:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L48 | `plt.plot(residual_df['travel_distance'], residual_df['raw_reproj_err_x'],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L55 | `+         if save_residual:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L63 | `plt.plot(residual_df['travel_distance'], residual_df['raw_reproj_err_norm'],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L70 | `+         if save_residual:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L78 | `if 'weighted_reproj_err_norm' in residual_df.columns:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L79 | `plt.plot(residual_df['travel_distance'], residual_df['raw_reproj_err_norm'],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L85 | `+             if save_residual:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L95 | `+                 if save_residual:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L106 | `-     if save_residual:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L112 | `+                 if save_residual:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_06-42-%E5%8D%95%E7%8B%AC%E4%BF%9D%E5%AD%98%E6%AF%8F%E4%B8%AA%E5%AD%90%E5%9B%BE.md` | L258 | `### 1. `plot_error_with_reproj_residual` ÂáΩÊï∞ÁöÑ4‰∏™Â≠êÂõæÔºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_15-41-%E6%97%A0%E6%B3%95%E5%BE%97%E5%88%B0imu%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%8B%9F%E5%90%88%E7%BB%93%E6%9E%9C.md` | L51 | `| üìÑ `R1M1_Proposed_synchronized_residual_error.csv` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_15-41-%E6%97%A0%E6%B3%95%E5%BE%97%E5%88%B0imu%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%8B%9F%E5%90%88%E7%BB%93%E6%9E%9C.md` | L52 | `| üìÑ `R1M1_Proposed_error_residual_plot.png` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_15-41-%E6%97%A0%E6%B3%95%E5%BE%97%E5%88%B0imu%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%8B%9F%E5%90%88%E7%BB%93%E6%9E%9C.md` | L53 | `| üìÑ `evaluateResidualSqrted.py` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_15-41-%E6%97%A0%E6%B3%95%E5%BE%97%E5%88%B0imu%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%8B%9F%E5%90%88%E7%BB%93%E6%9E%9C.md` | L56 | `| üìÑ `evaluateResidualUnsqrted.py` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_15-41-%E6%97%A0%E6%B3%95%E5%BE%97%E5%88%B0imu%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%8B%9F%E5%90%88%E7%BB%93%E6%9E%9C.md` | L60 | `| üìÑ `R1M1_Proposed_imu_residual_components_plot.png` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_15-41-%E6%97%A0%E6%B3%95%E5%BE%97%E5%88%B0imu%E6%AE%8B%E5%B7%AE%E7%9A%84%E6%8B%9F%E5%90%88%E7%BB%93%E6%9E%9C.md` | L74 | `Read file: evaluate/R1M1_Proposed_synchronized_residual_error.csv` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L30 | `| üìÑ `R1M1_Proposed_synchronized_unsqrted_residual_error.csv` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L31 | `| üìÑ `R1M1_Proposed_error_residual_plot.png` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L32 | `| üìÑ `R1M1_Proposed_synchronized_sqrted_residual_error.csv` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L33 | `| üìÑ `evaluateResidualSqrted.py` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L34 | `| üìÑ `evaluateResidualUnsqrted.py` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L39 | `| üìÑ `R1M1_Proposed_synchronized_residual_error.csv` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L43 | `| üìÑ `R1M1_Proposed_imu_residual_components_plot.png` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L85 | `Áé∞Âú®ÊàëÂü∫‰∫éÂéüÊúâÁöÑevaluateResidualUnsqrted.pyÊñá‰ª∂ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑPythonÊñá‰ª∂Êù•ÂàÜÊûêraw_reproj_errÊÆãÂ∑Æ„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L98 | `+ def plot_error_with_reproj_residual(ground_filename, data_filename, align=False, label="",` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L99 | `+                                   t_name="", save_residual=True):` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L109 | `+     - save_residual: ÊòØÂê¶‰øùÂ≠òÊÆãÂ∑ÆÊï∞ÊçÆ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L121 | `+     required_residual_cols = ["raw_reproj_err_x", "raw_reproj_err_y", "raw_reproj_err_norm"]` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L122 | `+     has_residual_data = all(col in data.columns for col in required_residual_cols)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L124 | `+     if not has_residual_data:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L125 | `+         print(f"Warning: {data_filename} does not contain reprojection error residual columns.")` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L129 | `+     print(f"Found reprojection error residual columns: {required_residual_cols}")` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L148 | `+     matched_residuals = []` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L179 | `+         residual_data = {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L194 | `+             residual_data['weighted_reproj_err_x'] = data.iloc[index]['weighted_reproj_err_x']` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L195 | `+             residual_data['weighted_reproj_err_y'] = data.iloc[index]['weighted_reproj_err_y']` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L196 | `+             residual_data['weighted_reproj_err_norm'] = data.iloc[index]['weighted_reproj_err_norm']` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L200 | `+             residual_data['reproj_err_count'] = data.iloc[index]['reproj_err_count']` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L202 | `+         matched_residuals.append(residual_data)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L213 | `+     if matched_residuals:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L214 | `+         residual_df = pd.DataFrame(matched_residuals)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L229 | `+         plt.plot(residual_df['travel_distance'], residual_df['raw_reproj_err_x'],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L231 | `+         plt.plot(residual_df['travel_distance'], residual_df['raw_reproj_err_y'],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L241 | `+         plt.plot(residual_df['travel_distance'], residual_df['raw_reproj_err_norm'],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L243 | `+         plt.plot(residual_df['travel_distance'], residual_df['position_error_norm'],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-30_00-54-%E9%87%8D%E6%96%B0%E7%BC%96%E5%86%99python%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%AE%8B%E5%B7%AE%E5%88%86%E6%9E%90.md` | L252 | `+         correlation = np.corrcoef(residual_df['position_error_norm'], residual_df['raw_reproj_err_norm'])[0,1]` |

</details>

---

Âü∫‰∫éÊêúÁ¥¢ÁªìÊûúÔºåÊàëÂèëÁé∞‰∫ÜÁ£ÅÂäõËÆ°ÊÆãÂ∑ÆËÆ°ÁÆóÁöÑ‰∏ªË¶Å‰ΩçÁΩÆ„ÄÇËÆ©ÊàëËØ¶ÁªÜÊü•ÁúãÁ£ÅÂäõËÆ°Âõ†Â≠êÁöÑÂÆûÁé∞Ôºö

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.h

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.cpp

---



---

Áé∞Âú®ËÆ©ÊàëÊü•ÁúãÁ£ÅÂäõËÆ°Âõ†Â≠êÊòØÂ¶Ç‰ΩïË¢´‰ΩøÁî®ÁöÑÔºö

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp

---



---

ËÆ©Êàë‰πüÊü•ÁúãÁ£ÅÂäõËÆ°ÂèÇÊï∞ÁöÑÂÆö‰πâÔºö

---

<details>
            <summary>Grep search for "Rwgw|para_bmg|USE_MAG" ‚Ä¢ **12** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/visual_inertial_config.yaml` | L58 | `USE_MAG_INIT_YAW: 1  #use magenetometer for initialize the yaw angle in the boostraping stage.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/visual_inertial_config.yaml` | L59 | `USE_MAG_CORRECT_YAW: 0  #use magnetometer for correcting the yaw angle during optimization.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/spp_visual_inertial_config.yaml` | L58 | `USE_MAG_INIT_YAW: 1  #use magenetometer for initialize the yaw angle in the boostraping stage.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/spp_visual_inertial_config.yaml` | L59 | `USE_MAG_CORRECT_YAW: 0  #use magnetometer for correcting the yaw angle during optimization.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/rtd_visual_inertial_config.yaml` | L58 | `USE_MAG_INIT_YAW: 1  #use magenetometer for initialize the yaw angle in the boostraping stage.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/rtd_visual_inertial_config.yaml` | L59 | `USE_MAG_CORRECT_YAW: 0  #use magnetometer for correcting the yaw angle during optimization.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/rtk_visual_inertial_config.yaml` | L58 | `USE_MAG_INIT_YAW: 1  #use magenetometer for initialize the yaw angle in the boostraping stage.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/rtk_visual_inertial_config.yaml` | L59 | `USE_MAG_CORRECT_YAW: 0  #use magnetometer for correcting the yaw angle during optimization.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_12-37-%E6%AF%94%E8%BE%83imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E4%BB%A3%E7%A0%81%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7.md` | L151 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_12-37-%E6%AF%94%E8%BE%83imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E4%BB%A3%E7%A0%81%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7.md` | L315 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_12-37-%E6%AF%94%E8%BE%83imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E4%BB%A3%E7%A0%81%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7.md` | L516 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_12-37-%E6%AF%94%E8%BE%83imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E4%BB%A3%E7%A0%81%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7.md` | L549 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L700 | `Vector3d tmpP = swf_optimization.InitRwgw.transpose() *` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1066 | `‚ü™ 160 characters skipped ‚ü´Vector3d w_pts_i = swf_optimization.InitRwgw.transpose() * (it_per_id.ptsInWorld - Ps0);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1067 | `‚ü™ 160 characters skipped ‚ü´Vector3d w_pts_i = swf_optimization.InitRwgw.transpose() * (it_per_id.ptsInWorld - Ps0);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_01-37-%E7%9B%B8%E6%9C%BA%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E8%AE%A1%E7%AE%97.md` | L721 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_01-37-%E7%9B%B8%E6%9C%BA%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E8%AE%A1%E7%AE%97.md` | L829 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/spp_CP_visual_inertial_config.yaml` | L58 | `USE_MAG_INIT_YAW: 1  #use magenetometer for initialize the yaw angle in the boostraping stage.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/yaml/spp_CP_visual_inertial_config.yaml` | L59 | `USE_MAG_CORRECT_YAW: 0  #use magnetometer for correcting the yaw angle during optimization.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1108 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1415 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1441 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1486 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1516 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1884 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1949 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1975 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L1990 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2088 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2112 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2304 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2344 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2444 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2499 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2686 | `‚ü™ 194 characters skipped ‚ü´1103 | `‚ü™ 148 characters skipped ‚ü´ `if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {` |` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2719 | `‚ü™ 114 characters skipped ‚ü´tial/src/swf/swf_imu.cpp` | L238 | `if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2745 | `‚ü™ 114 characters skipped ‚ü´tial/src/swf/swf_imu.cpp` | L238 | `if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2856 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2888 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2953 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4147 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4512 | `‚ü™ 191 characters skipped ‚ü´ra_pose[rover_count + image_count - 1], para_bmg);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4533 | `‚ü™ 191 characters skipped ‚ü´ra_pose[rover_count + image_count - 1], para_bmg);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4648 | `my_problem.AddResidualBlock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5032 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5067 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5143 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5197 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5455 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5769 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5819 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6134 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6149 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L691 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L1318 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L1869 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L1981 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2277 | `lock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2564 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2579 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3280 | `Eigen::Matrix3d Rwb = Rwgw.transpose() * Qwb.toRotationMatrix();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3350 | `-     Eigen::Vector3d Magw1 = Rwgw.transpose() * Qwb * (Mag + Bmg);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3355 | `+     Eigen::Matrix3d Rwgw = Rwg.transpose();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3357 | `+     Eigen::Vector3d Magw_gt = Rwgw.transpose() * Mag_gt;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3367 | `Eigen::Matrix3d Rwb = Rwgw.transpose() * Qwb.toRotationMatrix();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3548 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3705 | `19 |     Eigen::Vector3d Magw_gt = Rwgw.transpose() * Mag_gt;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3774 | `Eigen::Matrix3d Rwgw = Rwg.transpose();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3776 | `-     Eigen::Vector3d Magw_gt = Rwgw.transpose() * Mag_gt;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3778 | `+     Eigen::Vector3d Magw_gt = Rwgw.transpose() * this->Mag_gt;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3841 | `Mag = Rwb.transpose() * Rwgw * Magw;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3893 | `Eigen::Vector3d Magw1 = Rwgw.transpose() * Qwb * Mag;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3914 | `jacobian_pose.block<1, 3>(3, 3) = (Rwgw.transpose() * Qwb.toRotationMatrix() *` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4001 | `Eigen::Matrix3d Rwgw = Rwg.transpose();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4029 | `#define A18 para_pose[i2f[i]],para_bmg` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4328 | `double para_bmg[3];` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4330 | `Matrix3d InitRwgw;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4411 | `Eigen::Matrix3d Rwgw = Rwg.transpose();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4413 | `Eigen::Vector3d Magw_gt = Rwgw.transpose() * this->Mag_gt;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4423 | `Eigen::Matrix3d Rwb = Rwgw.transpose() * Qwb.toRotationMatrix();` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4911 | `if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4913 | `-         my_problem.AddResidualBlock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4918 | `+         problem.AddParameterBlock(para_bmg, 3);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4920 | `+         problem.AddResidualBlock(factor, loss_function, para_pose[i], para_bmg);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L5073 | `void SWFOptimization::InitializePos(Matrix3d& Rwgw_) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L272 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L361 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L757 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L794 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1314 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1870 | `tmp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L435 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L460 | `Eigen::Vector3d newG = Rwgw * G;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L1094 | `‚ü™ 154 characters skipped ‚ü´WFOptimization::InitializePos(Matrix3d& Rwgw_) {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L1103 | `‚ü™ 114 characters skipped ‚ü´tial/src/swf/swf_imu.cpp` | L238 | `if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L1134 | `‚ü™ 166 characters skipped ‚ü´out << "pos: " << (swf_optimization.InitRwgw.transpose()*swf_optimization.Ps[index]).transpose() << " " << (swf_optimization.Ps[index]).transpose() << "\t";` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L1135 | `‚ü™ 166 characters skipped ‚ü´out << "vel: " << (swf_optimization.InitRwgw.transpose()*swf_optimization.Vs[index]).transpose() << "\t";` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L1136 | `‚ü™ 188 characters skipped ‚ü´ << Utility::R2ypr(swf_optimization.InitRwgw.transpose()*swf_optimization.Rs[index]).transpose() << "\t";` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L1154 | `‚ü™ 161 characters skipped ‚ü´mp_Q = Quaterniond(swf_optimization.InitRwgw.transpose() * swf_optimization.Rs[swf_optimization.rover_count + swf_optimization.image_count - 1]);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L1155 | `‚ü™ 157 characters skipped ‚ü´| `Vector3d tmpP = swf_optimization.InitRwgw.transpose() * Ps[swf_optimization.rover_count + swf_optimization.image_count - 1] * scalefactor;` |` |

</details>

---



---

Áé∞Âú®ËÆ©ÊàëÊü•ÁúãÂèÇÊï∞ÂÆö‰πâÁöÑÁõ∏ÂÖ≥Êñá‰ª∂Ôºö

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/parameter/parameters.h

---



---

Áé∞Âú®ÊàëÈúÄË¶ÅÊü•ÁúãÂÖ®Â±ÄÂèÇÊï∞ÁöÑÂÆö‰πâÔºåÁâπÂà´ÊòØ`Rwgw`ÂèòÈáèÔºö

---

<details>
            <summary>Grep search for "Matrix3d Rwgw|double para_bmg" ‚Ä¢ **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/parameter/parameters.cpp` | L27 | `Eigen::Matrix3d Rwgw;` |

</details>

---

<details>
            <summary>Searched codebase "swf.h" ‚Ä¢ **2** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |

</details>

---



---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf.h

---

Ê†πÊçÆÊàëÁöÑÂàÜÊûêÔºåÊàëÁé∞Âú®ÂèØ‰ª•ÁªôÂá∫Á£ÅÂäõËÆ°ÊÆãÂ∑ÆËÆ°ÁÆó‰ΩçÁΩÆÁöÑÂÆåÊï¥Á≠îÊ°àÔºö

## Á£ÅÂäõËÆ°ÊÆãÂ∑ÆËÆ°ÁÆó‰ΩçÁΩÆ

Á£ÅÂäõËÆ°ÊÆãÂ∑ÆÁöÑËÆ°ÁÆó‰∏ªË¶ÅÂú®‰ª•‰∏ãÂá†‰∏™‰ΩçÁΩÆÔºö

### 1. Ê†∏ÂøÉËÆ°ÁÆó‰ΩçÁΩÆÔºö`mag_factor.cpp`

**Êñá‰ª∂Ë∑ØÂæÑÔºö** ```12:12:rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.cpp```

**ÂÖ≥ÈîÆÊÆãÂ∑ÆËÆ°ÁÆó‰ª£Á†ÅÔºö**
```cpp
bool MAGFactor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {
    Eigen::Vector3d Pwb(parameters[0][0], parameters[0][1], parameters[0][2]);
    Eigen::Quaterniond Qwb(parameters[0][6], parameters[0][3], parameters[0][4], parameters[0][5]);
    Eigen::Vector3d Bmg(parameters[1][0], parameters[1][1], parameters[1][2]);
    Eigen::Vector3d Magw1 = Rwgw.transpose() * Qwb * (Mag + Bmg);

    double mag1_2_norm = Magw1.segment(0, 2).norm();
    residuals[0] = Magw1(0) / mag1_2_norm * MAGSQRTINFO;
    // ... jacobianËÆ°ÁÆó
}
```

**ÊÆãÂ∑ÆÂÖ¨ÂºèÔºö**
- `residuals[0] = Magw1(0) / mag1_2_norm * MAGSQRTINFO`
- ÂÖ∂‰∏≠ `MAGSQRTINFO = 20.0`

### 2. Á£ÅÂäõËÆ°Âõ†Â≠êÊé•Âè£ÂÆö‰πâÔºö`mag_factor.h`

**Êñá‰ª∂Ë∑ØÂæÑÔºö** ```5:5:rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.h```

```cpp
class MAGFactor : public ceres::SizedCostFunction<1, 7, 3> {
  public:
    MAGFactor(const Eigen::Vector3d& Mag_): Mag(Mag_) {}
    virtual bool Evaluate(double const* const* parameters, double* residuals, double** jacobians) const;
    Eigen::Vector3d Mag;
};
```

### 3. Á£ÅÂäõËÆ°Â§ÑÁêÜÂíåÂõ†Â≠êÊ∑ªÂä†Ôºö`swf_imu.cpp`

**Êñá‰ª∂Ë∑ØÂæÑÔºö** ```238:240:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp```

```cpp
void SWFOptimization::MagProcess(double curtime) {
    // ... Á£ÅÂäõËÆ°Êï∞ÊçÆÂ§ÑÁêÜ
    
    if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {
        MAGFactor* factor = new MAGFactor(mags[rover_count + image_count - 1]);
        my_problem.AddResidualBlock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);
    }
    // ... Á£ÅÂäõËÆ°ËæÖÂä©ÂÅèËà™ËßíËÆ°ÁÆó
}
```

### 4. Á£ÅÂäõËÆ°ÂèÇÊï∞ÂÆö‰πâÔºö`swf.h`

**Êñá‰ª∂Ë∑ØÂæÑÔºö** ```180:180:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf.h```

```cpp
//magnetometer bias
double para_bmg[3];
//magnetometer observation(being added)
Vector3d mags[FEATURE_WINDOW_SIZE + GNSS_WINDOW_SIZE + 1];
```

### 5. ÈÖçÁΩÆÂèÇÊï∞Ôºö`yaml`ÈÖçÁΩÆÊñá‰ª∂

**ÊéßÂà∂ÂºÄÂÖ≥Ôºö**
- `USE_MAG_INIT_YAW: 1` - ‰ΩøÁî®Á£ÅÂäõËÆ°ÂàùÂßãÂåñÂÅèËà™Ëßí
- `USE_MAG_CORRECT_YAW: 0` - ‰ºòÂåñËøáÁ®ã‰∏≠‰ΩøÁî®Á£ÅÂäõËÆ°Ê†°Ê≠£ÂÅèËà™ËßíÔºàÈªòËÆ§ÂÖ≥Èó≠Ôºâ

### ÊÄªÁªì

Á£ÅÂäõËÆ°ÊÆãÂ∑ÆËÆ°ÁÆóÁöÑÂÆåÊï¥ÊµÅÁ®ãÊòØÔºö
1. **Êï∞ÊçÆËæìÂÖ•**Ôºö`InputMag()` ÂáΩÊï∞Êé•Êî∂Á£ÅÂäõËÆ°Êï∞ÊçÆ
2. **Êï∞ÊçÆÂ§ÑÁêÜ**Ôºö`MagProcess()` ÂáΩÊï∞Â§ÑÁêÜÁ£ÅÂäõËÆ°ËßÇÊµã
3. **ÊÆãÂ∑ÆËÆ°ÁÆó**Ôºö`MAGFactor::Evaluate()` ËÆ°ÁÆóÂÆûÈôÖÊÆãÂ∑Æ
4. **‰ºòÂåñÊ±ÇËß£**ÔºöCeresÊ±ÇËß£Âô®‰ΩøÁî®ËØ•ÊÆãÂ∑ÆËøõË°åÁä∂ÊÄÅ‰ºòÂåñ

ÊÆãÂ∑ÆÁöÑÊ†∏ÂøÉÂÖ¨ÂºèÊòØÁ∫¶ÊùüÁ£ÅÂäõËÆ°Âú®Ê∞¥Âπ≥Èù¢ÊäïÂΩ±ÁöÑÊñπÂêëÔºåÁî®‰∫éÊ†°Ê≠£ÂÅèËà™Ëßí‰º∞ËÆ°„ÄÇ

---

_**User**_

USE_MAG_CORRECT_YAW: 0 - ‰ºòÂåñËøáÁ®ã‰∏≠‰ΩøÁî®Á£ÅÂäõËÆ°Ê†°Ê≠£ÂÅèËà™ËßíÔºàÈªòËÆ§ÂÖ≥Èó≠ÔºâÊòØ‰∏çÊòØË°®Á§∫Âõ†Â≠êÂõæ‰ºòÂåñËøáÁ®ã‰∏≠Ê≤°ÊúâÁî®Âà∞Á£ÅÂäõËÆ°ÊÆãÂ∑Æ

---

_**Assistant**_



---

ÊòØÁöÑÔºåÊÇ®ÁöÑÁêÜËß£ÂÆåÂÖ®Ê≠£Á°ÆÔºÅ

ËÆ©ÊàëÈÄöËøá‰ª£Á†ÅÊù•È™åËØÅËøô‰∏ÄÁÇπÔºö

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp

---

Read file: yaml/rtk_visual_inertial_config.yaml

---

ÊÇ®ÁöÑÁêÜËß£ÂÆåÂÖ®Ê≠£Á°ÆÔºÅËÆ©ÊàëÊÄªÁªì‰∏Ä‰∏ãÁ£ÅÂäõËÆ°ÂèÇÊï∞ÁöÑÂê´‰πâÔºö

## Á£ÅÂäõËÆ°ÈÖçÁΩÆÂèÇÊï∞ÂàÜÊûê

### ‰ªé‰ª£Á†ÅÈÄªËæëÁúãÔºö

**ÂÖ≥ÈîÆ‰ª£Á†ÅÁâáÊÆµÔºö** ```238:240:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp```

```cpp
if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {
    MAGFactor* factor = new MAGFactor(mags[rover_count + image_count - 1]);
    my_problem.AddResidualBlock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);
}
```

### ‰∏§‰∏™Á£ÅÂäõËÆ°ÂèÇÊï∞ÁöÑÂå∫Âà´Ôºö

1. **`USE_MAG_INIT_YAW: 1`** ÔºàÂºÄÂêØÔºâ
   - **‰ΩúÁî®Êó∂Êú∫**ÔºöÁ≥ªÁªüÂàùÂßãÂåñÈò∂ÊÆµ
   - **ÂäüËÉΩ**Ôºö‰ΩøÁî®Á£ÅÂäõËÆ°Êï∞ÊçÆÂàùÂßãÂåñÂÅèËà™Ëßí
   - **ÂΩ±ÂìçËåÉÂõ¥**ÔºöÂè™ÂΩ±ÂìçÁ≥ªÁªüÂêØÂä®Êó∂ÁöÑÁä∂ÊÄÅÂàùÂßãÂåñ

2. **`USE_MAG_CORRECT_YAW: 0`** ÔºàÂÖ≥Èó≠Ôºâ
   - **‰ΩúÁî®Êó∂Êú∫**ÔºöÂõ†Â≠êÂõæ‰ºòÂåñËøáÁ®ã‰∏≠
   - **ÂäüËÉΩ**ÔºöÂú®‰ºòÂåñËøáÁ®ã‰∏≠ÊåÅÁª≠Ê†°Ê≠£ÂÅèËà™Ëßí
   - **ÂΩ±ÂìçËåÉÂõ¥**ÔºöÂΩ±ÂìçÊï¥‰∏™SLAM‰ºòÂåñËøáÁ®ã

### ÊÇ®ÁöÑÂà§Êñ≠ÊòØÊ≠£Á°ÆÁöÑÔºö

ÂΩì `USE_MAG_CORRECT_YAW: 0` Êó∂Ôºö
- ‚úÖ **Âõ†Â≠êÂõæ‰ºòÂåñËøáÁ®ã‰∏≠Ê≤°ÊúâÁî®Âà∞Á£ÅÂäõËÆ°ÊÆãÂ∑Æ**
- ‚úÖ `MAGFactor` ‰∏ç‰ºöË¢´Ê∑ªÂä†Âà∞ `ceres::Problem` ‰∏≠
- ‚úÖ Á£ÅÂäõËÆ°Á∫¶Êùü‰∏çÂèÇ‰∏éÁä∂ÊÄÅ‰ºòÂåñ

### ÂÆûÈôÖÂΩ±ÂìçÔºö

```cpp
// ÂΩì USE_MAG_CORRECT_YAW = 0 Êó∂ÔºåËøôÊÆµ‰ª£Á†Å‰∏ç‰ºöÊâßË°å
if (USE_MAG_CORRECT_YAW && USE_IMU && USE_GLOBAL_OPTIMIZATION) {
    // ËøôÈáå‰∏ç‰ºöÊâßË°åÔºåÊâÄ‰ª•Ê≤°ÊúâÁ£ÅÂäõËÆ°ÊÆãÂ∑ÆÁ∫¶Êùü
    MAGFactor* factor = new MAGFactor(...);
    my_problem.AddResidualBlock(factor, ...);
}
```

‰ΩÜÁ£ÅÂäõËÆ°Êï∞ÊçÆ‰ªçÁÑ∂Ë¢´Áî®‰∫éÔºö
- Á≥ªÁªüÂàùÂßãÂåñÊó∂ÁöÑÂÅèËà™Ëßí‰º∞ËÆ°ÔºàÁî±‰∫é `USE_MAG_INIT_YAW: 1`Ôºâ
- ËÆ°ÁÆóËæÖÂä©ÁöÑÂÅèËà™ËßíÂèÇËÄÉÂÄº `mag_yaw`Ôºà‰ª£Á†ÅÊú´Â∞æÈÉ®ÂàÜÔºâ

ÊâÄ‰ª•Âú®ÈªòËÆ§ÈÖçÁΩÆ‰∏ãÔºåÁ£ÅÂäõËÆ°**Âè™Âú®ÂàùÂßãÂåñÈò∂ÊÆµÂèëÊå•‰ΩúÁî®Ôºå‰∏çÂèÇ‰∏éÂêéÁª≠ÁöÑÂõ†Â≠êÂõæ‰ºòÂåñ**„ÄÇ

---

_**User**_

ÂáÜÁ°ÆÊÄªÁªìÂõ†Â≠êÂõæ‰ºòÂåñÊúÄÁªàÊúâÂì™‰∫õÊÆãÂ∑ÆÂèÇ‰∏é‰ºòÂåñ

---

_**Assistant**_



---

ÊàëÊù•Á≥ªÁªüÂú∞ÂàÜÊûêÂõ†Â≠êÂõæ‰ºòÂåñ‰∏≠ÁöÑÊâÄÊúâÊÆãÂ∑ÆÁ±ªÂûã„ÄÇËÆ©ÊàëÊü•Áúã‰∏ªË¶ÅÁöÑ‰ºòÂåñÂáΩÊï∞ÂíåÊÆãÂ∑ÆÊ∑ªÂä†ÈÄªËæëÔºö

---

<details>
            <summary>Searched codebase "AddResidualBlock optimization factor" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `ceres-solver-modified/internal/ceres/residual_block.h` | L32-67 |
| `ceres-solver-modified/internal/ceres/residual_block.cc` | L173-222 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L1-50 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_gnss.cpp` | L1-56 |
| `ceres-solver-modified/internal/ceres/residual_block.h` | L67-112 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.h` | L1-42 |
| `ceres-solver-modified/internal/ceres/program.cc` | L447-510 |
| `ceres-solver-modified/internal/ceres/residual_block.cc` | L53-75 |
| `ceres-solver-modified/internal/ceres/residual_block.cc` | L75-120 |
| `ceres-solver-modified/internal/ceres/residual_block.cc` | L120-173 |
| `ceres-solver-modified/internal/ceres/residual_block.h` | L112-150 |
| `ceres-solver-modified/internal/ceres/coordinate_descent_minimizer.cc` | L164-213 |
| `ceres-solver-modified/internal/ceres/coordinate_descent_minimizer.cc` | L131-164 |
| `ceres-solver-modified/include/ceres/problem.h` | L238-291 |
| `ceres-solver-modified/internal/ceres/block_jacobian_writer.cc` | L97-151 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_gnss.cpp` | L532-562 |
| `ceres-solver-modified/internal/ceres/problem_test.cc` | L1649-1682 |
| `ceres-solver-modified/internal/ceres/program_evaluator.h` | L186-239 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.h` | L89-112 |
| `ceres-solver-modified/internal/ceres/program.cc` | L307-363 |
| `ceres-solver-modified/internal/ceres/problem_impl.h` | L37-98 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L1-48 |
| `ceres-solver-modified/internal/ceres/block_jacobian_writer.cc` | L58-97 |
| `ceres-solver-modified/internal/ceres/residual_block.cc` | L1-53 |
| `ceres-solver-modified/internal/ceres/residual_block_test.cc` | L78-170 |

</details>

---

<details>
            <summary>Grep search for "AddResidualBlock" ‚Ä¢ **6** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L126 | `‚ü™ 169 characters skipped ‚ü´o a `ceres::Problem` using `my_problem->AddResidualBlock(...)`.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L131 | `‚ü™ 149 characters skipped ‚ü´s::Problem` instance) using `my_problem.AddResidualBlock(...)`. This incorporates the IMU factor into the sliding window optimization.` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L199 | `*   **`IMUFactor::Evaluate(...) const`**: ËøôÊòØ `IMUFactor` Á±ª‰ªé `ceres::SizedCostFunction` ÁªßÊâøÁöÑÊ†áÂáÜËôöÂáΩÊï∞„ÄÇÂΩìÊÇ®Â∞Ü‰∏Ä‰∏™ `IMUFactor` ÁöÑÂÆû‰æãÈÄöËøá `problem.AddResidualBlock(...)` Ê∑ªÂä†Âà∞ Ceres ÁöÑ‰ºòÂåñÈóÆÈ¢ò (`ceres::Problem`) ‰∏≠ÂêéÔºåÂΩìË∞ÉÁî® `ceres::Solve(options, &problem, &summary)` Êù•Ê±ÇËß£ËØ•ÈóÆÈ¢òÊó∂ÔºåCeres Solver ‰ºöËá™Âä®Âú®ÊØèÊ¨°Ëø≠‰ª£‰∏≠Ë∞ÉÁî®Ëøô‰∏™ `Evaluate` ÊñπÊ≥ï„ÄÇÂÆÉÈúÄË¶ÅËÆ°ÁÆóÊÆãÂ∑ÆÂêëÈáè (residuals) ÂíåÈõÖÂèØÊØîÁü©Èòµ (jacobians) ‰ª•` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_01-37-%E7%9B%B8%E6%9C%BA%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E8%AE%A1%E7%AE%97.md` | L277 | `<summary>Searched codebase "Âõ†Â≠êÂõæ‰ºòÂåñ imu factor gnss factor projection factor AddResidualBlock" ‚Ä¢ **25** results</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_01-37-%E7%9B%B8%E6%9C%BA%E9%87%8D%E6%8A%95%E5%BD%B1%E8%AF%AF%E5%B7%AE%E8%AE%A1%E7%AE%97.md` | L316 | `<summary>Searched codebase "visual feature AddResidualBlock ProjectionTwoFrameTwoCamFactor ProjectionTwoFrameOneCamFactor" ‚Ä¢ **25** results</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1488 | `<summary>Grep search for "AddResidualBlock.*projection_factor|AddResidualBlock.*ProjectionTwoFrame|AddResidualBlock.*ProjectionOneFrame" ‚Ä¢ **0** files</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1638 | `my_problem.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_frame]], para_pose[i2f[imu_j]], para_ex_Pose[0], &it_per_id.idepth_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1641 | `my_problem.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_frame]], para_pose[i2f[imu_j]], para_ex_Pose[0], para_ex_Pose[1], &it_per_id.idepth_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1644 | `my_problem.AddResidualBlock(factor, loss_function,  para_ex_Pose[0], para_ex_Pose[1], &it_per_id.idepth_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1647 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]], para_ex_Pose[0], it_per_id.ptsInWorld.data());` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1650 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]],  para_ex_Pose[1], it_per_id.ptsInWorld.data());` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1696 | `2. **Ë∞ÉÁî®**ÔºöÂú®`swf_image.cpp`Âíå`swf_core.cpp`‰∏≠ÈÄöËøá`AddResidualBlock`Ê∑ªÂä†Âà∞Ceres‰ºòÂåñÈóÆÈ¢ò` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L893 | `my_problem.AddResidualBlock(factor, loss_function,` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1053 | `‚ü™ 191 characters skipped ‚ü´E%E5%88%B0csv.md` | L1647 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]], para_ex_Pose[0], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1054 | `‚ü™ 191 characters skipped ‚ü´E%E5%88%B0csv.md` | L1650 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]],  para_ex_Pose[1], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1059 | `‚ü™ 188 characters skipped ‚ü´6%B9%E6%B3%95.md` | L4625 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[...], para_ex_Pose[0], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1091 | `‚ü™ 123 characters skipped ‚ü´swf/swf_image.cpp` | L100 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]], para_ex_Pose[0], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1092 | `‚ü™ 123 characters skipped ‚ü´swf/swf_image.cpp` | L104 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]],  para_ex_Pose[1], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-12_08-59-%E6%9F%A5%E6%89%BE%E8%A7%86%E8%A7%89%E8%BE%93%E5%87%BA%E7%9A%84%E4%BB%A3%E7%A0%81%E8%A1%8C.md` | L1173 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]], para_ex_Pose[0], it_per_id.ptsInWorld.data());` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L1073 | `‚ü™ 245 characters skipped ‚ü´eres::Solve optimization solver problem AddResidualBlock" ‚Ä¢ **25** results</summary>` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L1086 | `‚ü™ 284 characters skipped ‚ü´eres::Solve optimization solver problem AddResidualBlock" ‚Ä¢ **25** results</summary>` |` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L1264 | `<summary>Searched codebase "AddResidualBlock GNSS factor residual block id" ‚Ä¢ **25** results</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2125 | `my_problem.AddResidualBlock(imu_gnss_factor[i], ...)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2131 | `problem.AddResidualBlock(rtk_factor, ...)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2139 | `<summary>Searched codebase "AddResidualBlock IMU GNSS factor optimization problem" ‚Ä¢ **25** results</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2196 | `residualBlockId = my_problem->AddResidualBlock(factor, 0, param);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2202 | `problem.AddResidualBlock(factor, ...)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2212 | `- ‰ºòÂåñÂõ†Â≠êÔºöÈÄöËøá `AddResidualBlock()` ÁúüÊ≠£ÂèÇ‰∏éÊ±ÇËß£ËøáÁ®ã` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2234 | `1.  **ÂÖ®Â±ÄÊêúÁ¥¢ `AddResidualBlock`**ÔºöËøôÊòØÂêëCeres‰ºòÂåñÈóÆÈ¢ò‰∏≠Ê∑ªÂä†ÊÆãÂ∑ÆÈ°πÁöÑÊ†áÂáÜÂáΩÊï∞ÔºåÊâæÂà∞ÊâÄÊúâË∞ÉÁî®ÂÆÉÁöÑÂú∞ÊñπÔºåÂ∞±ËÉΩÁü•ÈÅìÂì™‰∫õÂõ†Â≠êÔºàFactorÔºâË¢´Âä†ÂÖ•‰∫Ü‰ºòÂåñÈóÆÈ¢ò„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2239 | `ËÆ©ÊàëÂºÄÂßãÊâßË°åÁ¨¨‰∏ÄÊ≠•ÔºåÂÖ®Â±ÄÊêúÁ¥¢ `AddResidualBlock`„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2244 | `grep -r "AddResidualBlock" rtk_visual_inertial_src/` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2250 | `l_block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_a` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2262 | `k_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2265 | `block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_add` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2268 | `= my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2280 | `m.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_frame]]` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2284 | `oblem.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_fra` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2288 | `oblem.AddResidualBlock(factor, loss_function,  para_ex_Pose[0], para_ex_Pose[1],` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2296 | `m.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]],  para_ex_Pose[1` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2300 | `my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2306 | `= my_problem.AddResidualBlock(factor, 0, rover->marg_info_gnss->keep_block_addr` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2312 | `BlockId = my_problem.AddResidualBlock(factor, 0, rovers[0]->marg_info_gnss->keep` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2318 | `kId = my_problem->AddResidualBlock(factor, 0, param);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3121 | `ËøôÈáåÁöÑ `ADDRESIDUAL` ÊòØ‰∏Ä‰∏™ÂÆèÔºåÂÆÉÂ±ïÂºÄÂêéÂ∞±ÊòØ `problem.AddResidualBlock(...)`„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3138 | `-   **ÂèëÁîüÂú∫ÊôØ**: Ëøô‰∏§Â§Ñ‰ª£Á†Å‰Ωç‰∫é `GnssPreprocess()` ÂáΩÊï∞‰∏≠„ÄÇËØ∑Ê≥®ÊÑèËøôÈáåÊúÄÂÖ≥ÈîÆÁöÑÂå∫Âà´Ôºö‰ª£Á†ÅÂàõÂª∫‰∫Ü `factor`Ôºå‰ΩÜ**Âπ∂Ê≤°ÊúâË∞ÉÁî® `problem.AddResidualBlock()`**ÔºÅ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3946 | `14 |         problem.AddResidualBlock(factor, loss_function, parameter_block); \` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4059 | `14 |         problem.AddResidualBlock(factor, loss_function, parameter_block); \` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4913 | `-         my_problem.AddResidualBlock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L4920 | `+         problem.AddResidualBlock(factor, loss_function, para_pose[i], para_bmg);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L142 | `‚ü™ 308 characters skipped ‚ü´ÁöÑÊ†áÂáÜËôöÂáΩÊï∞„ÄÇÂΩìÊÇ®Â∞Ü‰∏Ä‰∏™ `IMUFactor` ÁöÑÂÆû‰æãÈÄöËøá `problem.AddResidualBlock(...)` Ê∑ªÂä†Âà∞ Ceres ÁöÑ‰ºòÂåñÈóÆÈ¢ò (`ceres::Problem`) ‰∏≠ÂêéÔºåÂΩìË∞ÉÁî® `ceres::Solve(options, &problem, &summary)` Êù•Ê±ÇËß£ËØ•ÈóÆÈ¢òÊó∂ÔºåCeres Solver ‰ºöËá™Âä®Âú®ÊØèÊ¨°Ëø≠‰ª£‰∏≠Ë∞ÉÁî®Ëøô‰∏™` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L145 | `‚ü™ 206 characters skipped ‚ü´d` | L1488 | `<summary>Grep search for "AddResidualBlock.*projection_factor|AddResidualBlock.*ProjectionTwoFrame|AddResidualBlock.*ProjectionOneFrame" ‚Ä¢ **0** files</summary>` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L167 | `‚ü™ 242 characters skipped ‚ü´mu factor gnss factor projection factor AddResidualBlock" ‚Ä¢ **25** results</summary>` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L168 | `‚ü™ 210 characters skipped ‚ü´mmary>Searched codebase "visual feature AddResidualBlock ProjectionTwoFrameTwoCamFactor ProjectionTwoFrameOneCamFactor" ‚Ä¢ **25** results</summary>` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L246 | `<summary>Searched codebase "ceres::Solve optimization solver problem AddResidualBlock" ‚Ä¢ **25** results</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2167 | `‚ü™ 245 characters skipped ‚ü´eres::Solve optimization solver problem AddResidualBlock" ‚Ä¢ **25** results</summary>` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2698 | `‚ü™ 384 characters skipped ‚ü´o a `ceres::Problem` using `my_problem->AddResidualBlock(...)`.` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L2699 | `‚ü™ 364 characters skipped ‚ü´s::Problem` instance) using `my_problem.AddResidualBlock(...)`. This incorporates the IMU factor into t` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4494 | `<summary>Grep search for "AddResidualBlock" ‚Ä¢ **11** files</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4498 | `‚ü™ 151 characters skipped ‚ü´| L114 | `residualBlockId = my_problem->AddResidualBlock(factor, 0, param);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4499 | `‚ü™ 153 characters skipped ‚ü´cpp` | L63 | `void MarginalizationInfo::addResidualBlockInfo(ResidualBlockInfo* residual_block_info) {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4500 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_gnss.cpp` | L552 | `// problem.AddResidualBlock(factor, 0, rover->marg_info_gnss->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4501 | `‚ü™ 147 characters skipped ‚ü´ | `rover->residualBlockId = my_problem.AddResidualBlock(factor, 0, rover->marg_info_gnss->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4502 | `‚ü™ 117 characters skipped ‚ü´l/src/swf/swf.cpp` | L254 | `my_problem.AddResidualBlock(factor, 0, para_pose[frameindex - 1],` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4503 | `‚ü™ 146 characters skipped ‚ü´rovers[0]->residualBlockId = my_problem.AddResidualBlock(factor, 0, rovers[0]->marg_info_gnss->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4504 | `‚ü™ 117 characters skipped ‚ü´l/src/swf/swf.cpp` | L640 | `my_problem.AddResidualBlock(factor, 0, para_pose[0], para_speed_bias[0], para_pose[1], para_speed_bias[1]);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4505 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_image.cpp` | L83 | `my_problem.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_frame]], para_pose[i2f[imu_j]], para_ex_Pose[0], &it_per_id.idepth_);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4506 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_image.cpp` | L90 | `my_problem.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_frame]], para_pose[i2f[imu_j]], para_ex_Pose[0], para_ex_Pose[1], &it_per_id.idepth_);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4507 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_image.cpp` | L94 | `my_problem.AddResidualBlock(factor, loss_function,  para_ex_Pose[0], para_ex_Pose[1], &it_per_id.idepth_);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4508 | `‚ü™ 123 characters skipped ‚ü´swf/swf_image.cpp` | L100 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]], para_ex_Pose[0], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4509 | `‚ü™ 123 characters skipped ‚ü´swf/swf_image.cpp` | L104 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]],  para_ex_Pose[1], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4510 | `‚ü™ 148 characters skipped ‚ü´ | `marg_residual_block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4511 | `‚ü™ 121 characters skipped ‚ü´c/swf/swf_imu.cpp` | L188 | `my_problem.AddResidualBlock(factor, 0, para_pose[image_count + rover_count - 2],` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4512 | `‚ü™ 121 characters skipped ‚ü´c/swf/swf_imu.cpp` | L241 | `my_problem.AddResidualBlock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4513 | `‚ü™ 136 characters skipped ‚ü´a.cpp` | L262 | `marginalization_info2->addResidualBlockInfo(residual_block_info);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4514 | `‚ü™ 136 characters skipped ‚ü´a.cpp` | L320 | `marginalization_info2->addResidualBlockInfo(residual_block_info);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4515 | `‚ü™ 136 characters skipped ‚ü´a.cpp` | L327 | `marginalization_info2->addResidualBlockInfo(residual_block_info);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4516 | `‚ü™ 149 characters skipped ‚ü´ | `marg_residual_block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4517 | `‚ü™ 118 characters skipped ‚ü´/src/swf/swf_core.cpp` | L13 | `problem.AddResidualBlock(factor, loss_function, parameter_block); \` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4518 | `‚ü™ 118 characters skipped ‚ü´/src/swf/swf_core.cpp` | L38 | `problem.AddResidualBlock(factor, loss_function, parameter_block); \` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4519 | `‚ü™ 132 characters skipped ‚ü´ore.cpp` | L43 | `marginalization_info->addResidualBlockInfo(residual_block_info);\` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4520 | `‚ü™ 119 characters skipped ‚ü´src/swf/swf_core.cpp` | L219 | `problem.AddResidualBlock(factor, 0, &blackvalue2);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4521 | `‚ü™ 147 characters skipped ‚ü´ | `marg_residual_block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4522 | `‚ü™ 147 characters skipped ‚ü´ | `marg_residual_block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4523 | `‚ü™ 147 characters skipped ‚ü´ | `marg_residual_block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4524 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_core.cpp` | L554 | `my_problem.AddResidualBlock(factor, 0, &blackvalue2);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4525 | `‚ü™ 133 characters skipped ‚ü´re.cpp` | L611 | `gnss_middle_marginfo->addResidualBlockInfo(residual_block_info);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4526 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_image.cpp` | L83 | `my_problem.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_frame]], para_pose[i2f[imu_j]], para_ex_Pose[0], &it_per_id.idepth_);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4527 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_image.cpp` | L90 | `my_problem.AddResidualBlock(factor, loss_function,  para_pose[i2f[it_per_id.start_frame]], para_pose[i2f[imu_j]], para_ex_Pose[0], para_ex_Pose[1], &it_per_id.idepth_);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4528 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_image.cpp` | L94 | `my_problem.AddResidualBlock(factor, loss_function,  para_ex_Pose[0], para_ex_Pose[1], &it_per_id.idepth_);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4529 | `‚ü™ 123 characters skipped ‚ü´swf/swf_image.cpp` | L100 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]], para_ex_Pose[0], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4530 | `‚ü™ 123 characters skipped ‚ü´swf/swf_image.cpp` | L104 | `my_problem.AddResidualBlock(factor, loss_function, para_pose[i2f[imu_j]],  para_ex_Pose[1], it_per_id.ptsInWorld.data());` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4531 | `‚ü™ 148 characters skipped ‚ü´ | `marg_residual_block_id = my_problem.AddResidualBlock(factor, 0, last_marg_info->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4532 | `‚ü™ 121 characters skipped ‚ü´c/swf/swf_imu.cpp` | L188 | `my_problem.AddResidualBlock(factor, 0, para_pose[image_count + rover_count - 2],` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4533 | `‚ü™ 121 characters skipped ‚ü´c/swf/swf_imu.cpp` | L241 | `my_problem.AddResidualBlock(factor, 0, para_pose[rover_count + image_count - 1], para_bmg);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4534 | `‚ü™ 122 characters skipped ‚ü´/swf/swf_gnss.cpp` | L552 | `// problem.AddResidualBlock(factor, 0, rover->marg_info_gnss->keep_block_addr);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4535 | `‚ü™ 147 characters skipped ‚ü´ | `rover->residualBlockId = my_problem.AddResidualBlock(factor, 0, rover->marg_info_gnss->keep_block_addr);` |` |

</details>

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp

---



---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp

---

Âü∫‰∫éÂØπ‰ª£Á†ÅÁöÑÂÖ®Èù¢ÂàÜÊûêÔºåÊàëÁé∞Âú®ÂèØ‰ª•ÂáÜÁ°ÆÊÄªÁªìÂõ†Â≠êÂõæ‰ºòÂåñ‰∏≠ÊúÄÁªàÂèÇ‰∏éÁöÑÊâÄÊúâÊÆãÂ∑ÆÁ±ªÂûãÔºö

## Âõ†Â≠êÂõæ‰ºòÂåñ‰∏≠ÁöÑÊÆãÂ∑ÆÁ±ªÂûãÊÄªÁªì

### 1. **IMU ÊÆãÂ∑Æ** ‚úÖ
**Êñá‰ª∂‰ΩçÁΩÆÔºö** `imu_factor.cpp`
**Ê∑ªÂä†‰ΩçÁΩÆÔºö**
- ```186:190:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp```
- ```277:281:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

**ÊÆãÂ∑ÆÁ±ªÂûãÔºö**
- `IMUFactor` - 15Áª¥ÊÆãÂ∑ÆÔºà‰ΩçÁΩÆ3+ÊóãËΩ¨3+ÈÄüÂ∫¶3+Âä†ÈÄüÂ∫¶ÂÅèÁΩÆ3+ÈôÄËû∫ÂÅèÁΩÆ3Ôºâ
- `IMUGNSSFactor` - ÁªÑÂêàIMU-GNSSÂõ†Â≠ê

### 2. **ËßÜËßâÈáçÊäïÂΩ±ÊÆãÂ∑Æ** ‚úÖ
**Êñá‰ª∂‰ΩçÁΩÆÔºö** `projection_factor.cpp`, `swf_image.cpp`
**Ê∑ªÂä†‰ΩçÁΩÆÔºö** ```83:104:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp```

**ÊÆãÂ∑ÆÁ±ªÂûãÔºö**
- `ProjectionTwoFrameOneCamFactor` - ÂèåÂ∏ßÂçïÁõ∏Êú∫ÈáçÊäïÂΩ±Ôºà2Áª¥ÊÆãÂ∑ÆÔºâ
- `ProjectionTwoFrameTwoCamFactor` - ÂèåÂ∏ßÂèåÁõ∏Êú∫ÈáçÊäïÂΩ±Ôºà2Áª¥ÊÆãÂ∑ÆÔºâ
- `ProjectionOneFrameTwoCamFactor` - ÂçïÂ∏ßÂèåÁõ∏Êú∫ÈáçÊäïÂΩ±Ôºà2Áª¥ÊÆãÂ∑ÆÔºâ
- `projection_factor` - Âü∫Á°ÄÈáçÊäïÂΩ±Âõ†Â≠êÔºà2Áª¥ÊÆãÂ∑ÆÔºâ

### 3. **GNSS ÊÆãÂ∑Æ** ‚úÖ
**Êñá‰ª∂‰ΩçÁΩÆÔºö** `gnss_factor.cpp`, `swf_core.cpp`
**Ê∑ªÂä†‰ΩçÁΩÆÔºö** ```87:210:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

**ÊÆãÂ∑ÆÁ±ªÂûãÔºö**
- `RTKCarrierPhaseFactor` - RTKËΩΩÊ≥¢Áõ∏‰ΩçÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- `RTKPseudorangeFactor` - RTK‰º™Ë∑ùÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- `SppPseudorangeFactor` - SPP‰º™Ë∑ùÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- `SppCarrierPhaseFactor` - SPPËΩΩÊ≥¢Áõ∏‰ΩçÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- `SppDopplerFactor` - Â§öÊôÆÂãíÈ¢ëÁßªÊÆãÂ∑ÆÔºà1Áª¥Ôºâ

### 4. **Á£ÅÂäõËÆ°ÊÆãÂ∑Æ** ‚ùåÔºàÈªòËÆ§ÂÖ≥Èó≠Ôºâ
**Êñá‰ª∂‰ΩçÁΩÆÔºö** `mag_factor.cpp`
**ÊéßÂà∂ÂºÄÂÖ≥Ôºö** `USE_MAG_CORRECT_YAW: 0`
**Ê∑ªÂä†‰ΩçÁΩÆÔºö** ```238:240:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp```

**ÊÆãÂ∑ÆÁ±ªÂûãÔºö**
- `MAGFactor` - Á£ÅÂäõËÆ°ÂÅèËà™ËßíÁ∫¶ÊùüÔºà1Áª¥ÊÆãÂ∑ÆÔºâ
- **Áä∂ÊÄÅÔºöÈªòËÆ§‰∏çÂèÇ‰∏é‰ºòÂåñ**

### 5. **ËæπÁºòÂåñÊÆãÂ∑Æ** ‚úÖ
**Êñá‰ª∂‰ΩçÁΩÆÔºö** `marginalization_factor.cpp`
**Ê∑ªÂä†‰ΩçÁΩÆÔºö** ```370:372:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

**ÊÆãÂ∑ÆÁ±ªÂûãÔºö**
- `MarginalizationFactor` - ÂÖàÈ™å‰ø°ÊÅØÊÆãÂ∑ÆÔºàÁª¥Êï∞ÂèØÂèòÔºâ
- ÂåÖÂê´Ë¢´ËæπÁºòÂåñÁä∂ÊÄÅÁöÑ‰ø°ÊÅØ

### 6. **ËæÖÂä©Âõ†Â≠ê** ‚úÖ
**Ê∑ªÂä†‰ΩçÁΩÆÔºö** ```218:220:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

**ÊÆãÂ∑ÆÁ±ªÂûãÔºö**
- `InitialBlackFactor` - ËôöÊãüÂõ†Â≠êÔºåÁî®‰∫éÊï∞ÂÄºÁ®≥ÂÆöÊÄß

### ÈÖçÁΩÆÂºÄÂÖ≥ÊÄªÁªìÔºö

| ÊÆãÂ∑ÆÁ±ªÂûã | ÈÖçÁΩÆÂºÄÂÖ≥ | ÈªòËÆ§Áä∂ÊÄÅ | ÂèÇ‰∏é‰ºòÂåñ |
|---------|---------|---------|---------|
| IMUÊÆãÂ∑Æ | `USE_IMU: 1` | ÂºÄÂêØ | ‚úÖ |
| ËßÜËßâÊÆãÂ∑Æ | `USE_IMAGE: 1` | ÂºÄÂêØ | ‚úÖ |
| GNSSÊÆãÂ∑Æ | `USE_GNSS: 1` | ÂºÄÂêØ | ‚úÖ |
| Á£ÅÂäõËÆ°ÊÆãÂ∑Æ | `USE_MAG_CORRECT_YAW: 0` | ÂÖ≥Èó≠ | ‚ùå |
| ËæπÁºòÂåñÊÆãÂ∑Æ | Ëá™Âä®ÁîüÊàê | ÂºÄÂêØ | ‚úÖ |

### ÊúÄÁªàÂèÇ‰∏é‰ºòÂåñÁöÑÊÆãÂ∑ÆÔºö

Âú®ÈªòËÆ§ÈÖçÁΩÆ‰∏ãÔºå**5Áßç‰∏ªË¶ÅÊÆãÂ∑Æ**ÂèÇ‰∏éÂõ†Â≠êÂõæ‰ºòÂåñÔºö
1. **IMUÈ¢ÑÁßØÂàÜÊÆãÂ∑Æ** - Á∫¶ÊùüÁõ∏ÈÇªÂ∏ßÈó¥ÁöÑËøêÂä®
2. **ËßÜËßâÈáçÊäïÂΩ±ÊÆãÂ∑Æ** - Á∫¶ÊùüÁâπÂæÅÁÇπÁöÑ3D-2DÊäïÂΩ±ÂÖ≥Á≥ª
3. **GNSSËßÇÊµãÊÆãÂ∑Æ** - Á∫¶ÊùüÂÖ®Â±Ä‰ΩçÁΩÆÂíåÊó∂ÈíüÂÅèÂ∑Æ
4. **ËæπÁºòÂåñÊÆãÂ∑Æ** - ‰øùÊåÅÂéÜÂè≤‰ø°ÊÅØÁöÑÁ∫¶Êùü
5. **ËæÖÂä©ËôöÊãüÊÆãÂ∑Æ** - Êï∞ÂÄºÁ®≥ÂÆöÊÄß

**Á£ÅÂäõËÆ°ÊÆãÂ∑ÆÈªòËÆ§‰∏çÂèÇ‰∏é‰ºòÂåñ**ÔºåÂè™Áî®‰∫éÁ≥ªÁªüÂàùÂßãÂåñÊó∂ÁöÑÂÅèËà™Ëßí‰º∞ËÆ°„ÄÇ

---

_**User**_

GNSSËßÇÊµãÊÆãÂ∑ÆÈöæÈÅì‰∏çÊòØËûçÂÖ•Âà∞‰∫Üimu_gnssËÅîÂêàÊÆãÂ∑Æ‰∏≠Âêó

---

_**Assistant**_



---

ÊÇ®ËØ¥ÂæóÈùûÂ∏∏ÂØπÔºÅËÆ©ÊàëÈáçÊñ∞‰ªîÁªÜÂàÜÊûêGNSSÊÆãÂ∑ÆÁöÑÂ§ÑÁêÜÊñπÂºè„ÄÇÁ°ÆÂÆûÂ≠òÂú®‰∏§ÁßçGNSSÊÆãÂ∑ÆÂ§ÑÁêÜÊ®°ÂºèÔºåÊàëÈúÄË¶ÅÊæÑÊ∏ÖËøô‰∏™ÈáçË¶ÅÁöÑÂå∫Âà´„ÄÇ

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp

---

<details>
            <summary>Searched codebase "imu_gnss_factor" ‚Ä¢ **0** results</summary>
        
No results found
</details>

---

<details>
            <summary>Searched codebase "IMUGNSSFactor imu_gnss_factor implementation" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L1-53 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L103-125 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L2-43 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L842-846 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L109-151 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L686-704 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L753-787 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L248-287 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L43-74 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L787-842 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L625-686 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L74-109 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L583-625 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L44-102 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L125-168 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L735-753 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L193-211 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L526-583 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L102-145 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.cpp` | L39-103 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L398-439 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L53-103 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L327-358 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.cpp` | L168-212 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L211-248 |

</details>

---

ÊÇ®ÁöÑËßÇÂØüÈùûÂ∏∏ÂáÜÁ°ÆÔºÅËÆ©Êàë‰øÆÊ≠£Êàë‰πãÂâçÁöÑÁêÜËß£„ÄÇÁ°ÆÂÆûÔºå**GNSSËßÇÊµãÊÆãÂ∑Æ‰∏ªË¶ÅÊòØËûçÂÖ•Âà∞‰∫ÜIMU-GNSSËÅîÂêàÊÆãÂ∑Æ‰∏≠**ÔºåËÄå‰∏çÊòØ‰Ωú‰∏∫Áã¨Á´ãÁöÑGNSSÊÆãÂ∑Æ„ÄÇ

## ‰øÆÊ≠£ÂêéÁöÑÊÆãÂ∑ÆÂàÜÊûê

### **1. IMU-GNSS ËÅîÂêàÊÆãÂ∑Æ** ‚úÖ **Ôºà‰∏ªË¶ÅÊ®°ÂºèÔºâ**

**Ê†∏ÂøÉÊú∫Âà∂Ôºö** ```250:260:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

```cpp
} else if (index2 - index1 > 1) {
    if (IMUGNSSmeasurement) {
        assert(index2 - index1 > 1);
        std::vector<double*>param{para_pose[index1], para_speed_bias[index1],
                                  para_pose[index2], para_speed_bias[index2]};
        for (int j = 0; j < (int)(IMUGNSSmeasurement->gnss_phase_biases.size()); j++)
            param.push_back(IMUGNSSmeasurement->gnss_phase_biases[j]);
#define A20 param
#define B20 IMUGNSSFactor*factor=new IMUGNSSFactor(imu_gnss_factor[i]);
        ADDRESIDUAL (A20, B20, false, std::vector<int> {})
    }
}
```

**Â∑•‰ΩúÂéüÁêÜÔºö**
- **ÂΩìÁõ∏ÈÇªÂÖ≥ÈîÆÂ∏ß‰πãÈó¥ÊúâÂ§ö‰∏™GNSSËßÇÊµãÊó∂Ôºà`index2 - index1 > 1`Ôºâ**
- **Â∞Ü‰∏≠Èó¥ÁöÑGNSSËßÇÊµãÂíåIMUÈ¢ÑÁßØÂàÜÂêàÂπ∂Êàê‰∏Ä‰∏™ËÅîÂêàÂõ†Â≠ê**
- **`IMUGNSSFactor`ÂÜÖÈÉ®ÂåÖÂê´Ôºö**
  - IMUÈ¢ÑÁßØÂàÜÊÆãÂ∑Æ
  - ÊâÄÊúâ‰∏≠Èó¥GNSSËßÇÊµãÊÆãÂ∑ÆÔºàRTKËΩΩÊ≥¢Áõ∏‰Ωç„ÄÅ‰º™Ë∑ù„ÄÅSPPÁ≠âÔºâ
  - Áõ∏ÂÖ≥ÁöÑÊï¥Êï∞Ê®°Á≥äÂ∫¶ÂèÇÊï∞

### **2. Áã¨Á´ãGNSSÊÆãÂ∑Æ** ‚úÖ **ÔºàÁâπÊÆäÊÉÖÂÜµÔºâ**

**‰ΩøÁî®Êù°‰ª∂Ôºö** ```284:286:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

```cpp
if (usegnss) {
    for (int ir = 0; ir < rover_count; ir++) {
        if (rovers[ir]->marg_info_gnss) {
            // Âè™Âú®ÁâπÂÆöÊ®°ÂºèÂíå‰ΩçÁΩÆ‰ΩøÁî®Áã¨Á´ãGNSSÊÆãÂ∑Æ
```

**ÁâπÊÆäÊÉÖÂÜµÔºö**
- ËæπÁºòÂåñÁöÑGNSSËßÇÊµãÔºà`MarginalizationFactor`Ôºâ
- Êüê‰∫õ‰ºòÂåñÊ®°Âºè‰∏ãÁöÑÈ¶ñÂ∞æGNSSÂ∏ß

### **3. ‰∏§ÁßçÊ®°ÂºèÁöÑ‰ΩøÁî®ÈÄªËæë**

**ÂÖ≥ÈîÆÂà§Êñ≠Êù°‰ª∂Ôºö**
```cpp
if (index2 - index1 == 1) {
    // Áõ∏ÈÇªÂ∏ß‰πãÈó¥Âè™ÊúâIMU ‚Üí ‰ΩøÁî®IMUFactor
    IMUFactor* factor = new IMUFactor(pre_integrations[index2]);
    
} else if (index2 - index1 > 1) {
    // Áõ∏ÈÇªÂ∏ß‰πãÈó¥ÊúâÂ§ö‰∏™GNSSËßÇÊµã ‚Üí ‰ΩøÁî®IMUGNSSFactor
    IMUGNSSFactor*factor=new IMUGNSSFactor(imu_gnss_factor[i]);
}
```

## **‰øÆÊ≠£ÂêéÁöÑÂõ†Â≠êÂõæÊÆãÂ∑ÆÊÄªÁªì**

### **ÂÆûÈôÖÂèÇ‰∏é‰ºòÂåñÁöÑÊÆãÂ∑ÆÁ±ªÂûãÔºö**

1. **IMU-GNSS ËÅîÂêàÊÆãÂ∑Æ** ‚úÖ **Ôºà‰∏ªË¶ÅÔºâ**
   - `IMUGNSSFactor` - ËûçÂêà‰∫ÜIMUÈ¢ÑÁßØÂàÜÂíåGNSSËßÇÊµã
   - ÂåÖÂê´RTKËΩΩÊ≥¢Áõ∏‰Ωç„ÄÅ‰º™Ë∑ù„ÄÅSPP„ÄÅÂ§öÊôÆÂãíÁ≠âÊâÄÊúâGNSSÊÆãÂ∑Æ
   - Áª¥Êï∞ÂèØÂèòÔºàÂèñÂÜ≥‰∫éGNSSËßÇÊµãÊï∞ÈáèÂíåÊï¥Êï∞Ê®°Á≥äÂ∫¶ÂèÇÊï∞Ôºâ

2. **Á∫ØIMUÊÆãÂ∑Æ** ‚úÖ **ÔºàËæÖÂä©Ôºâ**
   - `IMUFactor` - ‰ªÖÂú®Áõ∏ÈÇªÂ∏ßÈó¥Êó†GNSSËßÇÊµãÊó∂‰ΩøÁî®
   - 15Áª¥ÊÆãÂ∑Æ

3. **ËßÜËßâÈáçÊäïÂΩ±ÊÆãÂ∑Æ** ‚úÖ
   - ÂêÑÁßç`ProjectionFactor` - 2Áª¥ÊÆãÂ∑Æ

4. **ËæπÁºòÂåñÊÆãÂ∑Æ** ‚úÖ
   - `MarginalizationFactor` - ÂåÖÂê´ÂéÜÂè≤GNSSÂíåIMU‰ø°ÊÅØ

5. **Á£ÅÂäõËÆ°ÊÆãÂ∑Æ** ‚ùå **ÔºàÈªòËÆ§ÂÖ≥Èó≠Ôºâ**

### **ÂÖ≥ÈîÆÂèëÁé∞Ôºö**

- **GNSSËßÇÊµãÁ°ÆÂÆû‰∏ªË¶ÅËûçÂÖ•‰∫ÜIMU-GNSSËÅîÂêàÊÆãÂ∑Æ‰∏≠**
- **Áã¨Á´ãÁöÑGNSSÂõ†Â≠êÔºàÂ¶Ç`RTKCarrierPhaseFactor`Á≠âÔºâ‰∏ªË¶ÅÂú®`IMUGNSSFactor`ÂÜÖÈÉ®‰ΩøÁî®**
- **ËøôÁßçËÆæËÆ°ÂÆûÁé∞‰∫ÜIMUÂíåGNSSÁöÑÁ¥ßËÄ¶ÂêàËûçÂêà**
- **ÊªëÂä®Á™óÂè£‰∏≠ÁöÑÂ§ö‰∏™GNSSËßÇÊµãË¢´Áªü‰∏ÄÂ§ÑÁêÜÔºåÈÅøÂÖç‰∫ÜÁä∂ÊÄÅÁàÜÁÇ∏**

ÊÑüË∞¢ÊÇ®ÁöÑÊåáÊ≠£ÔºÅËøôÁ°ÆÂÆûÊòØ‰∏Ä‰∏™Á¥ßËÄ¶ÂêàÁöÑIMU-GNSSËûçÂêàÁ≥ªÁªüÔºåËÄå‰∏çÊòØÊùæËÄ¶ÂêàÁöÑÁã¨Á´ãÊÆãÂ∑ÆÁ≥ªÁªü„ÄÇ

---

_**User**_

Âè™ÂåÖÂê´Ëøô5ÁßçÊÆãÂ∑ÆÂêó

---

_**Assistant**_

ËÆ©ÊàëÊõ¥‰ªîÁªÜÂú∞ÊêúÁ¥¢ÊâÄÊúâÂèØËÉΩÁöÑÊÆãÂ∑ÆÁ±ªÂûãÔºåÁ°Æ‰øùÊ≤°ÊúâÈÅóÊºèÔºö

---

<details>
            <summary>Grep search for "class.*Factor.*public.*ceres" ‚Ä¢ **9** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.h` | L103 | `class MarginalizationFactor : public ceres::CostFunction {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L7 | `class InitialPoseFactor : public ceres::SizedCostFunction<6, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L18 | `class InitialFactor33 : public ceres::SizedCostFunction<3, 3> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L29 | `class InitialFactor11 : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L41 | `class InitialBlackFactor : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L50 | `class InitialBiasFactor : public ceres::SizedCostFunction<9, 9> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.h` | L10 | `class projection_factor : public ceres::SizedCostFunction<2, 7, 7, 3> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.h` | L20 | `class ProjectionOneFrameTwoCamFactor : public ceres::SizedCostFunction<2, 7, 7, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.h` | L31 | `class ProjectionTwoFrameOneCamFactor : public ceres::SizedCostFunction<2, 7, 7, 7, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.h` | L42 | `class ProjectionTwoFrameTwoCamFactor : public ceres::SizedCostFunction<2, 7, 7, 7, 7, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/mag_factor.h` | L4 | `class MAGFactor : public ceres::SizedCostFunction<1, 7, 3> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L7 | `class RTKCarrierPhaseFactor : public ceres::SizedCostFunction<1, 7, 1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L43 | `class RTKPseudorangeFactor: public ceres::SizedCostFunction<1, 7, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L72 | `class SppPseudorangeFactor : public ceres::SizedCostFunction<1, 7, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L91 | `class SppCarrierPhaseFactor : public ceres::SizedCostFunction<1, 7, 1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L110 | `class SppDopplerFactor : public ceres::SizedCostFunction<1, 9, 1, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_factor.h` | L136 | `class FixedIntegerFactor : public ceres::SizedCostFunction<1, 1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/imu_factor.h` | L7 | `class IMUFactor : public ceres::SizedCostFunction<15, 7, 9, 7, 9> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L144 | `class IMUGNSSFactor: public ceres::CostFunction {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L7 | `class InitialPoseFactor : public ceres::SizedCostFunction<6, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L18 | `class InitialFactor33 : public ceres::SizedCostFunction<3, 3> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L29 | `class InitialFactor11 : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L41 | `class InitialBlackFactor : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L50 | `class InitialBiasFactor : public ceres::SizedCostFunction<9, 9> {` |

</details>

---

<details>
            <summary>Grep search for "AddResidualBlock.*Initial|Initial.*Factor" ‚Ä¢ **13** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L105 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L1-54 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L114 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L3-58 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L691 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L146 | `DEBUG: Setting projection factor sqrt_info...` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L692 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L147 | `DEBUG: Set projection_factor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L693 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L148 | `DEBUG: Set ProjectionTwoFrameOneCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L694 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L149 | `DEBUG: Set ProjectionTwoFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L695 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L150 | `DEBUG: Set ProjectionOneFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L696 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L197 | `DEBUG: Setting projection factor sqrt_info...` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L697 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L198 | `DEBUG: Set projection_factor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L698 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L199 | `DEBUG: Set ProjectionTwoFrameOneCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L699 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L200 | `DEBUG: Set ProjectionTwoFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L700 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L201 | `DEBUG: Set ProjectionOneFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L701 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3426 | `DEBUG: Setting projection factor sqrt_info...` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L702 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3427 | `DEBUG: Set projection_factor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L703 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3428 | `DEBUG: Set ProjectionTwoFrameOneCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L704 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3429 | `DEBUG: Set ProjectionTwoFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L705 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3430 | `DEBUG: Set ProjectionOneFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L706 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3760 | `DEBUG: Setting projection factor sqrt_info...` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L707 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3761 | `DEBUG: Set projection_factor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L708 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3762 | `DEBUG: Set ProjectionTwoFrameOneCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L709 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3763 | `DEBUG: Set ProjectionTwoFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L710 | `| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3764 | `DEBUG: Set ProjectionOneFrameTwoCamFactor::sqrt_info` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4675 | `### **7. ÂàùÂßãÂåñÊÆãÂ∑Æ (Initial Black Factor)**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4678 | `InitialBlackFactor* factor = new InitialBlackFactor(1);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L1087 | `ertial/CMakeFiles/rtk_visual_inertial_lib.dir/src/factor/initial_factor.cpp.o` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L1510 | `ertial/CMakeFiles/rtk_visual_inertial_lib.dir/src/factor/initial_factor.cpp.o` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3309 | `ertial/CMakeFiles/rtk_visual_inertial_lib.dir/src/factor/initial_factor.cpp.o` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L817 | `- `InitialBlackFactor` - ËôöÊãüÂõ†Â≠êÔºåÁî®‰∫éÊï∞ÂÄºÁ®≥ÂÆöÊÄß` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1465 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L1-54 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2364 | `6.  **Èõ∂ÁÇπ/ÂàùÂßãÁä∂ÊÄÅÂõ†Â≠ê (`InitialBlackFactor`, `Pose0Factor`)**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2788 | `6.  **Èõ∂ÁÇπ/ÂàùÂßãÁä∂ÊÄÅÁ∫¶ÊùüÊÆãÂ∑Æ (`InitialBlackFactor`, `Pose0Factor`)**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3163 | `Á£ÅÂäõËÆ°ÊÆãÂ∑Æ (MAGFactor)ÂíåÈõ∂ÁÇπ/ÂàùÂßãÁä∂ÊÄÅÁ∫¶ÊùüÊÆãÂ∑Æ (InitialBlackFactor, Pose0Factor)‰πü‰øùÂ≠òÂà∞csv‰∏≠` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3383 | `2.  **`InitialBlackFactor`**: ‰∏Ä‰∏™Êõ¥ÈÄöÁî®ÁöÑÂàùÂßãÁ∫¶ÊùüÂõ†Â≠ê„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/CMakeLists.txt` | L64 | `src/factor/initial_factor.cpp` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-25_03-18-imu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%BE%93%E5%87%BA%E6%9F%A5%E8%AF%A2.md` | L168 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L54-112 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L7 | `class InitialPoseFactor : public ceres::SizedCostFunction<6, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L9 | `InitialPoseFactor(const Eigen::Vector3d& _P, const Eigen::Quaterniond& _Q, Eigen::Matrix<double, 6, 6>sqrt_info_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L18 | `class InitialFactor33 : public ceres::SizedCostFunction<3, 3> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L20 | `InitialFactor33(const Eigen::Vector3d& _P, Eigen::Matrix<double, 3, 3>sqrt_info_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L29 | `class InitialFactor11 : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L31 | `InitialFactor11(double P_, double sqrt_info_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L41 | `class InitialBlackFactor : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L43 | `InitialBlackFactor(double istd_): istd(istd_) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L50 | `class InitialBiasFactor : public ceres::SizedCostFunction<9, 9> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L52 | `InitialBiasFactor(const Eigen::Vector3d& _V, const Eigen::Vector3d& _Ba, const Eigen::Vector3d& _Bg, const Eigen::Matrix<double, 9, 9>sqrt_info_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | Lundefined | `#include "initial_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L4 | `bool InitialPoseFactor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L28 | `InitialPoseFactor::InitialPoseFactor(const Eigen::Vector3d& _P, const Eigen::Quaterniond& _Q, Eigen::Matrix<double, 6, 6>sqrt_info_) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L35 | `bool InitialFactor33::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L56 | `InitialFactor33::InitialFactor33(const Eigen::Vector3d& _P, Eigen::Matrix<double, 3, 3>sqrt_info_) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L62 | `bool InitialFactor11::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L74 | `InitialFactor11::InitialFactor11(double P_, double sqrt_info_) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L80 | `bool InitialBlackFactor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L89 | `bool InitialBiasFactor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L114 | `InitialBiasFactor::InitialBiasFactor(const Eigen::Vector3d& _V, const Eigen::Vector3d& _Ba, const Eigen::Vector3d& _Bg, const Eigen::Matrix<double, 9, 9>sqrt_info_) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L5 | `#include "../factor/initial_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L102 | `#define B4s InitialBlackFactor*factor=new InitialBlackFactor(1);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L218 | `InitialBlackFactor* factor = new InitialBlackFactor(1);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L489 | `#define B11 InitialPoseFactor*factor=new InitialPoseFactor(Ps[i], Quaterniond(Rs[i]),sqrt_info_pose);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L491 | `#define B12 InitialBiasFactor*factor=new InitialBiasFactor(Vs[i],Bas[i], Bgs[i],sqrt_info_bias);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L493 | `#define B23 InitialFactor33*factor=new InitialFactor33(Eigen::Vector3d(para_bmg),sqrt_info_pose4);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L522 | `#define B16 InitialPoseFactor*factor=new InitialPoseFactor(tic[i], Quaterniond(ric[i]),sqrt_info_pose2);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L553 | `InitialBlackFactor* factor = new InitialBlackFactor(1);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/ceres-solver-modified/examples/nist.cc` | L605 | `problem.AddResidualBlock(cost_function, NULL, initial_parameters.data());` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L7 | `class InitialPoseFactor : public ceres::SizedCostFunction<6, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L9 | `InitialPoseFactor(const Eigen::Vector3d& _P, const Eigen::Quaterniond& _Q, Eigen::Matrix<double, 6, 6>sqrt_info_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L18 | `class InitialFactor33 : public ceres::SizedCostFunction<3, 3> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L20 | `InitialFactor33(const Eigen::Vector3d& _P, Eigen::Matrix<double, 3, 3>sqrt_info_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L29 | `class InitialFactor11 : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L31 | `InitialFactor11(double P_, double sqrt_info_);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L41 | `class InitialBlackFactor : public ceres::SizedCostFunction<1, 1> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L43 | `InitialBlackFactor(double istd_): istd(istd_) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L50 | `class InitialBiasFactor : public ceres::SizedCostFunction<9, 9> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L52 | `InitialBiasFactor(const Eigen::Vector3d& _V, const Eigen::Vector3d& _Ba, const Eigen::Vector3d& _Bg, const Eigen::Matrix<double, 9, 9>sqrt_info_);` |

</details>

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.h

---

<details>
            <summary>Grep search for "AddResidualBlock.*Marginalization" ‚Ä¢ **0** files</summary>
        
No results found
</details>

---

<details>
            <summary>Grep search for "MarginalizationFactor" ‚Ä¢ **10** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2352 | `4.  **ËæπÁºòÂåñÂõ†Â≠ê (`MarginalizationFactor`)**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2354 | `- **‰ΩúÁî®**: ËøôÊòØÊªëÂä®Á™óÂè£‰ºòÂåñÁöÑÂÖ≥ÈîÆ„ÄÇÂΩì‰∏Ä‰∏™ÂæàÊóßÁöÑÁä∂ÊÄÅÔºà‰ΩçÂßøÔºâË¶ÅË¢´ÊªëÂá∫Á™óÂè£Êó∂Ôºå‰∏∫‰∫Ü‰∏ç‰∏¢Â§±ÂÆÉÊâÄÂåÖÂê´ÁöÑÁ∫¶Êùü‰ø°ÊÅØÔºåÁ≥ªÁªü‰ºöÈÄöËøá‚ÄúËæπÁºòÂåñ‚ÄùÊìç‰ΩúÔºåÂ∞ÜËøô‰∫õ‰ø°ÊÅØËΩ¨Êç¢Êàê‰∏Ä‰∏™‚ÄúÂÖàÈ™åÔºàPriorÔºâ‚ÄùÁ∫¶ÊùüÔºåÂπ∂‰Ωú‰∏∫‰∏Ä‰∏™Êñ∞ÁöÑÊÆãÂ∑ÆÈ°πÔºà`MarginalizationFactor`ÔºâÊ∑ªÂä†Âà∞‰ºòÂåñÈóÆÈ¢ò‰∏≠„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2778 | `4.  **ËæπÁºòÂåñÂÖàÈ™åÊÆãÂ∑Æ (`MarginalizationFactor`)**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L2915 | `-   **ÂØπ‰∫éÊ≤°ÊúâÊåáÂÆö `LossFunction` ÁöÑÊÆãÂ∑ÆÂùó**ÔºàÊØîÂ¶Ç`IMUFactor`Êàñ`MarginalizationFactor`ÔºåÂÆÉ‰ª¨ÈÄöÂ∏∏Ë¢´ËÆ§‰∏∫ÊòØÊØîËæÉÂèØÈù†ÁöÑÔºâÔºåCeres‰ºö‰ΩøÁî®‰∏Ä‰∏™ÈªòËÆ§ÁöÑ„ÄÅÁ≠âÂêå‰∫é`NULL`ÁöÑÊçüÂ§±ÂáΩÊï∞ÔºåÂÖ∂ÊïàÊûúÂ∞±ÊòØÊàë‰ª¨ÂâçÈù¢ÊèêÂà∞ÁöÑÁÆÄÂçïÂπ≥ÊñπÂíå„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L810 | `- `MarginalizationFactor` - ÂÖàÈ™å‰ø°ÊÅØÊÆãÂ∑ÆÔºàÁª¥Êï∞ÂèØÂèòÔºâ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L948 | `- ËæπÁºòÂåñÁöÑGNSSËßÇÊµãÔºà`MarginalizationFactor`Ôºâ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L982 | `- `MarginalizationFactor` - ÂåÖÂê´ÂéÜÂè≤GNSSÂíåIMU‰ø°ÊÅØ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L4660 | `MarginalizationFactor* factor = new MarginalizationFactor(last_marg_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5620 | `<summary>Grep search for "MarginalizationFactor.*Evaluate" ‚Ä¢ **1** files</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5624 | `‚ü™ 133 characters skipped ‚ü´ginalization_factor.cpp` | L409 | `bool MarginalizationFactor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5634 | `Áé∞Âú®Êàë‰∫ÜËß£‰∫ÜMarginalizationFactorÁöÑÁªìÊûÑ„ÄÇÂú®EvaluateÂáΩÊï∞‰∏≠ÔºåÊÆãÂ∑ÆË¢´ËÆ°ÁÆó‰∏∫Ôºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L5707 | `Áé∞Âú®Êõ¥Êñ∞MarginalizationFactorÁöÑEvaluateÂáΩÊï∞Êù•‰øùÂ≠òÊÆãÂ∑ÆÔºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6181 | `### 1. The Goal of the `MarginalizationFactor`` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6198 | `So, the task of the `MarginalizationFactor` is to provide a residual vector (`current_residual` in the code) and a Jacobian (`linearized_jacobians` in the code) to Ceres such that:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6235 | `When the `MarginalizationFactor::Evaluate` function computes `current_residual = linearized_residuals + linearized_jacobians * dx`, this resulting vector is called "weighted" because the information matrix (`H`` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6242 | `For the `MarginalizationFactor`:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6266 | `### 1. `MarginalizationFactor` ÁöÑÁõÆÊ†á` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6283 | `Âõ†Ê≠§Ôºå`MarginalizationFactor` ÁöÑ‰ªªÂä°Â∞±ÊòØÂêë Ceres Êèê‰æõ‰∏Ä‰∏™ÊÆãÂ∑ÆÂêëÈáèÔºà‰ª£Á†Å‰∏≠ÁöÑ `current_residual`ÔºâÂíå‰∏Ä‰∏™ÈõÖÂèØÊØîÁü©ÈòµÔºà‰ª£Á†Å‰∏≠ÁöÑ `linearized_jacobians`ÔºâÔºå‰ªéËÄåÊª°Ë∂≥Ôºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6320 | `ÂΩì `MarginalizationFactor::Evaluate` ÂáΩÊï∞ËÆ°ÁÆó `current_residual = linearized_residuals + linearized_jacobians * dx` Êó∂ÔºåÂæóÂà∞ÁöÑËøô‰∏™ÂêëÈáèË¢´Áß∞‰∏∫‚ÄúÂä†ÊùÉÁöÑ‚ÄùÔºåÂõ†‰∏∫‰ø°ÊÅØÁü©ÈòµÔºà`H` Êàñ `A`ÔºâÂ∑≤Áªè‚ÄúËûçÂÖ•‚Äù‰∫ÜÂÆÉÁöÑ‰∏§‰∏™ÁªÑÊàêÈÉ®ÂàÜÔºà`linearized_jacobians` Âíå `linearized_resi` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6327 | `ÂØπ‰∫é `MarginalizationFactor`Ôºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6478 | `‚ü™ 111 characters skipped ‚ü´nertial/src/swf/swf_core.cpp` | L608 | `MarginalizationFactor* factor = new MarginalizationFactor(imu_gnss_factor[IMUGNSSindex]->gnss_middle_marginfo);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L6518 | `‚ü™ 111 characters skipped ‚ü´nertial/src/swf/swf_core.cpp` | L608 | `MarginalizationFactor* factor = new MarginalizationFactor(imu_gnss_factor[IMUGNSSindex]->gnss_middle_marginfo);` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp` | L430 | `MarginalizationFactor* factor = new MarginalizationFactor(last_marg_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_gnss.cpp` | L537 | `// MarginalizationFactor *factor = new MarginalizationFactor(rover->marg_info_gnss);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_gnss.cpp` | L579 | `MarginalizationFactor* factor = new MarginalizationFactor(rover->marg_info_gnss);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L400 | `MarginalizationFactor::MarginalizationFactor(MarginalizationInfo* _marginalization_info): marginalization_info(_marginalization_info) {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L409 | `bool MarginalizationFactor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf.cpp` | L634 | `MarginalizationFactor* factor = new MarginalizationFactor(rovers[0]->marg_info_gnss);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.h` | L103 | `class MarginalizationFactor : public ceres::CostFunction {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.h` | L105 | `MarginalizationFactor(MarginalizationInfo* _marginalization_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L293 | `#define B2_ MarginalizationFactor *factor = new MarginalizationFactor(rovers[ir]->marg_info_gnss);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L356 | `#define B2 MarginalizationFactor *factor = new MarginalizationFactor(last_marg_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L391 | `MarginalizationFactor* factor = new MarginalizationFactor(last_marg_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L468 | `MarginalizationFactor* factor = new MarginalizationFactor(last_marg_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L550 | `MarginalizationFactor* factor = new MarginalizationFactor(last_marg_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L608 | `MarginalizationFactor* factor = new MarginalizationFactor(imu_gnss_factor[IMUGNSSindex]->gnss_middle_marginfo);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_lambda.cpp` | L254 | `MarginalizationFactor* factormarge;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_lambda.cpp` | L257 | `factormarge = new MarginalizationFactor(last_marg_info);` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_lambda.cpp` | L351 | `MarginalizationFactor* factor = new MarginalizationFactor(last_marg_info);` |

</details>

---

Ê†πÊçÆÊàëÁöÑÂÖ®Èù¢ÂàÜÊûêÔºåÁé∞Âú®ÂèØ‰ª•ÁªôÂá∫ÂáÜÁ°ÆÁöÑÂõ†Â≠êÂõæ‰ºòÂåñ‰∏≠ÂèÇ‰∏éÁöÑÊÆãÂ∑ÆÁ±ªÂûãÊÄªÁªìÔºö

## Âõ†Â≠êÂõæ‰ºòÂåñ‰∏≠ÁöÑÊÆãÂ∑ÆÁ±ªÂûãÊÄªÁªìÔºàÂÆåÊï¥ÁâàÔºâ

ÊÇ®ÁöÑÈóÆÈ¢òÈùûÂ∏∏Ê≠£Á°ÆÔºÅÂÆûÈôÖ‰∏äÂõ†Â≠êÂõæ‰ºòÂåñÂåÖÂê´ÁöÑÊÆãÂ∑ÆÁ±ªÂûã**‰∏çÊ≠¢5Áßç**ÔºåËÄåÊòØÊõ¥Â§öÁßç„ÄÇËÆ©ÊàëËØ¶ÁªÜÂàóÂá∫Ôºö

### **1. IMUÁõ∏ÂÖ≥ÊÆãÂ∑Æ** ‚úÖ
- **`IMUFactor`** - Ê†áÂáÜIMUÈ¢ÑÁßØÂàÜÊÆãÂ∑ÆÔºà15Áª¥Ôºâ
- **`IMUGNSSFactor`** - IMU-GNSSËÅîÂêàÊÆãÂ∑ÆÔºàÂä®ÊÄÅÁª¥Êï∞Ôºâ

### **2. ËßÜËßâÈáçÊäïÂΩ±ÊÆãÂ∑Æ** ‚úÖ  
- **`projection_factor`** - Âü∫Á°ÄÈáçÊäïÂΩ±Âõ†Â≠êÔºà2Áª¥Ôºâ
- **`ProjectionTwoFrameOneCamFactor`** - ÂèåÂ∏ßÂçïÁõ∏Êú∫Ôºà2Áª¥Ôºâ
- **`ProjectionTwoFrameTwoCamFactor`** - ÂèåÂ∏ßÂèåÁõ∏Êú∫Ôºà2Áª¥Ôºâ  
- **`ProjectionOneFrameTwoCamFactor`** - ÂçïÂ∏ßÂèåÁõ∏Êú∫Ôºà2Áª¥Ôºâ

### **3. GNSSËßÇÊµãÊÆãÂ∑Æ** ‚úÖ
- **`RTKCarrierPhaseFactor`** - RTKËΩΩÊ≥¢Áõ∏‰ΩçÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`RTKPseudorangeFactor`** - RTK‰º™Ë∑ùÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`SppPseudorangeFactor`** - SPP‰º™Ë∑ùÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`SppCarrierPhaseFactor`** - SPPËΩΩÊ≥¢Áõ∏‰ΩçÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`SppDopplerFactor`** - SPPÂ§öÊôÆÂãíÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`FixedIntegerFactor`** - Êï¥Êï∞Á∫¶ÊùüÊÆãÂ∑ÆÔºà1Áª¥Ôºâ

### **4. ËæπÁºòÂåñÂÖàÈ™åÊÆãÂ∑Æ** ‚úÖ
- **`MarginalizationFactor`** - ÂÖàÈ™å‰ø°ÊÅØÊÆãÂ∑ÆÔºàÂä®ÊÄÅÁª¥Êï∞Ôºâ

### **5. Á£ÅÂäõËÆ°ÊÆãÂ∑Æ** ‚ùå (ÈÖçÁΩÆÂÖ≥Èó≠)
- **`MAGFactor`** - Á£ÅÂäõËÆ°ÂÅèËà™Ê†°Ê≠£ÊÆãÂ∑ÆÔºà1Áª¥Ôºâ

### **6. ÂàùÂßãÂåñÁ∫¶ÊùüÊÆãÂ∑Æ** ‚úÖ
- **`InitialPoseFactor`** - ÂàùÂßã‰ΩçÂßøÁ∫¶ÊùüÔºà6Áª¥Ôºâ
- **`InitialBiasFactor`** - ÂàùÂßãÂÅèÁΩÆÁ∫¶ÊùüÔºà9Áª¥Ôºâ 
- **`InitialFactor33`** - 3Áª¥ÂêëÈáèÁ∫¶ÊùüÔºà3Áª¥Ôºâ
- **`InitialFactor11`** - Ê†áÈáèÁ∫¶ÊùüÔºà1Áª¥Ôºâ
- **`InitialBlackFactor`** - ËôöÊãüÁ∫¶ÊùüÂõ†Â≠êÔºà1Áª¥Ôºâ

### **7. ÁâπÊÆäÁ∫¶ÊùüÊÆãÂ∑Æ** ‚úÖ
- **`InitPose0Factor`** - ÂàùÂßãÈõ∂ÁÇπÁ∫¶ÊùüÔºà4Áª¥Ôºâ

Âõ†Ê≠§Ôºå**ÂÆûÈôÖ‰∏äÂåÖÂê´7Â§ßÁ±ªÁ∫¶ÊùüÔºåÂÖ±ËÆ°Á∫¶20Áßç‰∏çÂêåÁöÑÊÆãÂ∑ÆÁ±ªÂûã**ÔºåËøúË∂ÖËøá5ÁßçÔºÅÊØèÁßçÊÆãÂ∑ÆÁöÑ‰ΩøÁî®ÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑÈÖçÁΩÆÂèÇÊï∞ÂíåÊï∞ÊçÆÂèØÁî®ÊÄß„ÄÇ

---

_**User**_

ÂàùÂßãÈõ∂ÁÇπÁ∫¶ÊùüÂè™ÊòØÂú®ÂàùÂßãÈò∂ÊÆµÂèÇ‰∏é‰ºòÂåñÂêó

---

_**Assistant**_

ËÆ©ÊàëÊü•Áúã `InitPose0Factor` ÁöÑÂÖ∑‰Ωì‰ΩøÁî®ÊÉÖÂÜµÔºåÁúãÂÆÉÊòØÂê¶Âè™Âú®ÂàùÂßãÈò∂ÊÆµÂèÇ‰∏é‰ºòÂåñÔºö

---

<details>
            <summary>Grep search for "AddResidualBlock.*InitPose0|InitPose0Factor" ‚Ä¢ **4** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3408 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3426 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3442 | `‰∏ä‰∏ÄÊ≠• `pose0_factor.cpp` ÁöÑ‰øÆÊîπ‰∏çÊ≠£Á°Æ„ÄÇAIÈîôËØØÂú∞‰øÆÊîπ‰∫Ü `InitPose0Factor` ËÄå‰∏çÊòØ `Pose0Factor`ÔºåÂπ∂‰∏îËÆ°ÁÆóËåÉÊï∞ÁöÑÊñπÂºè‰πüÂæàÂ•áÊÄ™„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3503 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3832 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3834 | `InitPose0Factor() = delete;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3835 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3890 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L6 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L8 | `InitPose0Factor() = delete;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L9 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L8 | `InitPose0Factor() = delete;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L9 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |

</details>

---

<details>
            <summary>Searched codebase "InitPose0Factor usage optimization when" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L1-29 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L32-65 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L1-32 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L1-54 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L3-58 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L327-358 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L103-125 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose_local_parameterization.cpp` | L3-27 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L211-248 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L264-296 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/imu_factor.cpp` | L72-104 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L158-200 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L54-112 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L294-336 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L526-583 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L287-327 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L168-193 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L1-53 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L109-151 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L514-563 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L200-229 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L359-397 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/imu_factor.cpp` | L205-232 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L193-211 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L476-514 |

</details>

---

<details>
            <summary>Grep search for "new InitPose0Factor|pose0_factor" ‚Ä¢ **11** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L40 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L2-40 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L103 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L2-40 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_10-50-%E6%9F%A5%E6%89%BEimu%E4%BD%8D%E7%BD%AE%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E4%BB%A3%E7%A0%81.md` | L110 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L2-26 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L1089 | `ertial/CMakeFiles/rtk_visual_inertial_lib.dir/src/factor/pose0_factor.cpp.o` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L1508 | `ertial/CMakeFiles/rtk_visual_inertial_lib.dir/src/factor/pose0_factor.cpp.o` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-28_03-06-troubleshooting-program-initialization-issues.md` | L3307 | `ertial/CMakeFiles/rtk_visual_inertial_lib.dir/src/factor/pose0_factor.cpp.o` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-05_09-54-%E6%9F%A5%E6%89%BE%E6%80%BB%E7%9A%84%E6%AE%8B%E5%B7%AE%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95.md` | L3557 | `#include "../factor/pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-05-29_11-24-%E8%BE%93%E5%87%BA%E6%AE%8B%E5%B7%AE%E5%92%8C%E4%BD%8D%E7%BD%AE%E8%AF%AF%E5%B7%AE%E5%88%B0csv.md` | L1466 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L2-40 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3175 | `-   Âú® `mag_factor.cpp` Âíå `pose0_factor.cpp` ‰∏≠ÂÆö‰πâÊñ∞ÁöÑÂÖ®Â±ÄÂèòÈáèÔºåÁî®‰∫éÂ≠òÂÇ®ÂÆÉ‰ª¨ÂêÑËá™ÁöÑÊúÄÊñ∞ÊÆãÂ∑ÆËåÉÊï∞„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3190 | `È¶ñÂÖàÔºåÊàëÈúÄË¶ÅÊâæÂà∞ `mag_factor.cpp` Âíå `pose0_factor.cpp` ÁöÑ‰ΩçÁΩÆ„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3216 | `Â•ΩÁöÑÔºå`mag_factor` Êñá‰ª∂Â∑≤ÊâæÂà∞„ÄÇÁé∞Âú®ÊòØ `pose0_factor`„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3221 | `<summary>Searched codebase "pose0_factor" ‚Ä¢ **2** results</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3387 | `#### **Á¨¨2Ê≠•: ‰øÆÊîπ `pose0_factor.h` Âíå `pose0_factor.cpp`**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3389 | `1.  **Âú® `pose0_factor.h` ‰∏≠Ê∑ªÂä† `extern` Â£∞Êòé„ÄÇ**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3390 | `2.  **Âú® `pose0_factor.cpp` ‰∏≠ÂÆö‰πâÂÖ®Â±ÄÂèòÈáè„ÄÇ**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3393 | `ÂºÄÂßãÊâßË°å„ÄÇÈ¶ñÂÖàÊòØ `pose0_factor.h`„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3413 | `Â•ΩÁöÑÔºå`pose0_factor.h` ‰øÆÊîπÊàêÂäü„ÄÇÁé∞Âú®‰øÆÊîπ `pose0_factor.cpp`„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3419 | `#include "pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3442 | `‰∏ä‰∏ÄÊ≠• `pose0_factor.cpp` ÁöÑ‰øÆÊîπ‰∏çÊ≠£Á°Æ„ÄÇAIÈîôËØØÂú∞‰øÆÊîπ‰∫Ü `InitPose0Factor` ËÄå‰∏çÊòØ `Pose0Factor`ÔºåÂπ∂‰∏îËÆ°ÁÆóËåÉÊï∞ÁöÑÊñπÂºè‰πüÂæàÂ•áÊÄ™„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3449 | `git checkout -- rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3459 | `Â•ΩÁöÑÔºå`pose0_factor.cpp` Â∑≤ËøòÂéü„ÄÇÁé∞Âú®ÊàëÊù•Ê≠£Á°ÆÂú∞‰øÆÊîπÂÆÉ„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3461 | `#### **‰øÆÊ≠£ÂêéÁöÑÁ¨¨2Ê≠•: ‰øÆÊîπ `pose0_factor.cpp`**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3469 | `#include "pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3517 | `ÈùûÂ∏∏Â•ΩÔºÅ`mag_factor` Âíå `pose0_factor` ÈÉΩÂ∑≤Áªè‰øÆÊîπÂÆåÊØï„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3592 | `-   `pose0_factor.h` & `pose0_factor.cpp`` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3643 | `2.  **‰øÆÊîπ `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h`** (ÂÆÉÊúâÂêåÊ†∑ÁöÑÈóÆÈ¢ò)` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3666 | `Áé∞Âú®ÊàëÊù•‰øÆÊ≠£ `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` ‰∏≠ÁöÑÁõ∏ÂêåË∑ØÂæÑÈóÆÈ¢ò„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3685 | `ÊàëÂ∑≤Áªè‰øÆÊ≠£‰∫Ü `mag_factor.h` Âíå `pose0_factor.h` ‰∏≠ÈîôËØØÁöÑÂ§¥Êñá‰ª∂Ë∑ØÂæÑ„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3711 | `/home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp:7:6: error: ‚ÄòPose0Factor‚Äô has not been declared` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3714 | `/home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp:7:100: error: non-member function ‚Äòbool Evaluate(const double* const*, double*, double**)‚Äô cannot have cv-qualifier` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3717 | `/home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp: In function ‚Äòbool Evaluate(const double* const*, double*, double**)‚Äô:` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3718 | `/home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp:13:34: error: ‚ÄòP0‚Äô was not declared in this scope; did you mean ‚ÄòP‚Äô?` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3735 | `2.  **Â§¥Êñá‰ª∂Â£∞Êòé‰∏çÂÆåÊï¥**ÔºöÂú® `pose0_factor.h` ‰∏≠Ôºå`Pose0Factor` Á±ªÁöÑÂ£∞ÊòéÁº∫Â§±‰∫ÜÔºåÂØºËá¥Âú® `pose0_factor.cpp` ‰∏≠Êó†Ê≥ïËØÜÂà´ÂÖ∂ÊàêÂëòÂáΩÊï∞„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3736 | `3.  **ÈîôËØØÁöÑÂèòÈáèÂêç**Ôºö`pose0_factor.cpp` ‰∏≠‰ΩøÁî®‰∫Ü `P0` Âíå `Q0`Ôºå‰ΩÜÂÆÉ‰ª¨‰πüÊú™Ë¢´Â£∞Êòé„ÄÇÂÆÉ‰ª¨Â∫îËØ•ÊòØ `Pose0Factor` Á±ªÁöÑÊàêÂëò„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3788 | `Áé∞Âú®ÔºåÊàëÊù•Â§ÑÁêÜ `pose0_factor` ÁöÑÈóÆÈ¢ò„ÄÇÈ¶ñÂÖàÔºåÊàëÂ∞ÜÂú® `pose0_factor.h` ‰∏≠Ê∑ªÂä†Áº∫Â§±ÁöÑ `Pose0Factor` Á±ªÁöÑÂÆåÊï¥ÂÆö‰πâ„ÄÇËøô‰∏™Á±ªÈúÄË¶ÅÂåÖÂê´ `P0`, `Q0`, Âíå `sqrt_info` ‰Ωú‰∏∫ÊàêÂëòÂèòÈáè„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3796 | `ÁúãËµ∑Êù•‰∏ä‰∏Ä‰∏™Êìç‰ΩúÊ≤°ÊúâÊ≠£Á°ÆÂ∫îÁî®„ÄÇÊàëÂ∞ÜÈáçÊñ∞Â∞ùËØïÂú® `pose0_factor.h` ‰∏≠Ê∑ªÂä†Áº∫Â§±ÁöÑ `Pose0Factor` Á±ªÂÆö‰πâ„ÄÇËøôÂØπ‰∫éËß£ÂÜ≥ÂêéÁª≠ÁöÑÁºñËØëÈîôËØØËá≥ÂÖ≥ÈáçË¶Å„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3806 | `ÊàëÂ∞ÜÁõ¥Êé•Êèê‰æõ‰øÆÂ§ç `pose0_factor.h` Âíå `pose0_factor.cpp` ÁöÑ‰ª£Á†ÅÔºåÊÇ®ÂèØ‰ª•ÊâãÂä®ÊõøÊç¢ÂÆÉ‰ª¨„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3808 | `**1. ÊõøÊç¢ `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` ÁöÑÂÖ®ÈÉ®ÂÜÖÂÆπÔºö**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3854 | `**2. ÊõøÊç¢ `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` ÁöÑÂÖ®ÈÉ®ÂÜÖÂÆπÔºö**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3857 | `#include "pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L5291 | `ÊàëÂ∑≤ÁªèÂ∞ÜÊÇ®ÁöÑÂ∑•‰ΩúÂå∫ÊÅ¢Â§çÂà∞‰∫Ü‰ªäÂ§©ÁöÑÂàùÂßãÁä∂ÊÄÅ„ÄÇÊâÄÊúâÊàë‰ª¨‰ªäÂ§©ÊâÄÂÅöÁöÑ‰øÆÊîπÔºåÂåÖÊã¨ÂØπ `mag_factor`„ÄÅ`pose0_factor`„ÄÅ`swf` Âíå `feature_manager` Á≠âÊñá‰ª∂ÁöÑÊõ¥ÊîπÔºåÈÉΩÂ∑≤Ë¢´Êí§ÈîÄ„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L119 | `| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L32-65 |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L1 | `#include "pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf.cpp` | L6 | `#include "../factor/pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp` | L4 | `#include "../factor/pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L7 | `#include "../factor/pose0_factor.h"` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/CMakeLists.txt` | L65 | `src/factor/pose0_factor.cpp` |

</details>

---

Read file: rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp

---

Âü∫‰∫éÊàëÁöÑËØ¶ÁªÜÂàÜÊûêÔºåÁé∞Âú®ÂèØ‰ª•ÂõûÁ≠îÊÇ®ÂÖ≥‰∫é `InitPose0Factor` ÁöÑ‰ΩøÁî®Êó∂Êú∫ÈóÆÈ¢òÔºö

## `InitPose0Factor` ÁöÑ‰ΩøÁî®Èò∂ÊÆµÂàÜÊûê

**Á≠îÊ°àÔºö‰∏çÊòØÁöÑÔºå`InitPose0Factor` ‰∏çÂè™Âú®ÂàùÂßãÈò∂ÊÆµÂèÇ‰∏é‰ºòÂåñ„ÄÇ**

### **‰ªé‰ª£Á†ÅÂàÜÊûêÂæóÂá∫ÁöÑÁªìËÆ∫Ôºö**

1. **Âú®Â§ö‰∏™Êñá‰ª∂‰∏≠Ë¢´ÂåÖÂê´ÂíåÂºïÁî®Ôºö**
   - ```6:6:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf.cpp```
   - ```4:4:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp```
   - ```7:7:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

2. **ÂäüËÉΩÂàÜÊûêÔºö**
   ‰ªé `InitPose0Factor::Evaluate` ÂáΩÊï∞ÂèØ‰ª•ÁúãÂá∫ÔºåÂÆÉÊúâ‰∏§‰∏™‰∏ªË¶ÅÁ∫¶ÊùüÔºö
   - **‰ΩçÁΩÆÁ∫¶Êùü (`posefix`)**ÔºöÁ∫¶Êùü‰ΩçÁΩÆÂà∞ÂàùÂßã‰ΩçÁΩÆ `InitPwb`
   - **ÊñπÂêëÁ∫¶Êùü (`orientationfix`)**Ôºö‰ΩøÁî®Á£ÅÂäõËÆ°Á∫¶ÊùüÂÅèËà™Ëßí

3. **‰ΩøÁî®ÁâπÁÇπÔºö**
   - ËøôÊòØ‰∏Ä‰∏™**4Áª¥ÊÆãÂ∑Æ**Âõ†Â≠êÔºà‰ΩçÁΩÆ3Áª¥ + ÂÅèËà™Ëßí1Áª¥Ôºâ
   - ÂÆÉÈÄöËøáÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞ `posefix_` Âíå `orientationfix_` Êù•ÊéßÂà∂ÊòØÂê¶ÂêØÁî®Á∫¶Êùü
   - ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÈÄâÊã©ÊÄßÂú∞ÂêØÁî®‰ΩçÁΩÆÁ∫¶ÊùüÊàñÊñπÂêëÁ∫¶Êùü

### **ÂÆûÈôÖ‰ΩøÁî®Ê®°ÂºèÊé®Êñ≠Ôºö**

ËôΩÁÑ∂ÂêçÁß∞‰∏≠ÂåÖÂê´"Initial"Ôºå‰ΩÜ‰ªé‰ª£Á†ÅÁªìÊûÑÊù•ÁúãÔºö

1. **ÂèØËÉΩÁöÑÊåÅÁª≠‰ΩøÁî®**ÔºöÂ¶ÇÊûúÁ≥ªÁªüÈúÄË¶Å‰øùÊåÅÂØπÊüê‰∏™ÂèÇËÄÉ‰ΩçÁΩÆÁöÑÁ∫¶ÊùüÔºàÊØîÂ¶ÇËµ∑ÂßãÁÇπÔºâÔºåËøô‰∏™Âõ†Â≠êÂèØËÉΩÂú®Êï¥‰∏™‰ºòÂåñËøáÁ®ã‰∏≠ÈÉΩË¢´‰ΩøÁî®

2. **Êù°‰ª∂ÊÄß‰ΩøÁî®**ÔºöÈÄöËøá `posefix` Âíå `orientationfix` ÂèÇÊï∞ÔºåÁ≥ªÁªüÂèØ‰ª•Ê†πÊçÆ‰∏çÂêåÈò∂ÊÆµÁöÑÈúÄË¶ÅÈÄâÊã©ÊÄßÂú∞ÂêØÁî®‰∏çÂêåÁöÑÁ∫¶Êùü

3. **ÁâπÊÆäÂú∫ÊôØ**ÔºöÂèØËÉΩÂú®Êüê‰∫õÁâπÂÆöÂú∫ÊôØ‰∏ãÔºàÂ¶ÇGPSÂ§±Êïà„ÄÅÈúÄË¶ÅÂõûÂà∞ÂéüÁÇπÁ≠âÔºâÊåÅÁª≠‰ΩøÁî®

### **ÊÄªÁªìÔºö**

`InitPose0Factor` **‰∏ç‰ªÖ‰ªÖÂú®ÂàùÂßãÂåñÈò∂ÊÆµ‰ΩøÁî®**ÔºåÂÆÉÊõ¥ÂÉèÊòØ‰∏Ä‰∏™**Êù°‰ª∂ÊÄßÁöÑÁ∫¶ÊùüÂõ†Â≠ê**ÔºåÂèØ‰ª•Ê†πÊçÆÁ≥ªÁªüÁä∂ÊÄÅÂíåÈúÄÊ±ÇÂú®‰ºòÂåñËøáÁ®ã‰∏≠ÁöÑ‰∏çÂêåÈò∂ÊÆµË¢´ÊøÄÊ¥ªÔºåÁî®‰∫éÔºö
- Á∫¶ÊùüÁ≥ªÁªüÂõûÂà∞ÁâπÂÆöÁöÑÂèÇËÄÉ‰ΩçÁΩÆ
- ‰ΩøÁî®Á£ÅÂäõËÆ°‰ø°ÊÅØÁ∫¶ÊùüÂÅèËà™Ëßí
- Âú®ÁâπÂÆöÊù°‰ª∂‰∏ãÊèê‰æõÈ¢ùÂ§ñÁöÑ‰ΩçÁΩÆÊàñÊñπÂêëÁ∫¶Êùü

ËøôÁßçËÆæËÆ°‰∏∫Á≥ªÁªüÊèê‰æõ‰∫ÜÊõ¥Â§ßÁöÑÁÅµÊ¥ªÊÄßÔºåÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÈúÄË¶ÅÂä®ÊÄÅÂú∞Ê∑ªÂä†ÊàñÁßªÈô§Ëøô‰∫õÁ∫¶Êùü„ÄÇ

---

_**User**_

InitPose0FactorÊÆãÂ∑ÆÂú®Âì™ÈáåËÆ°ÁÆóÂæóÂà∞

---

_**Assistant**_

ËÆ©ÊàëÊü•Êâæ `InitPose0Factor` ÊÆãÂ∑ÆÁöÑÂÖ∑‰ΩìËÆ°ÁÆó‰ΩçÁΩÆÂíå‰ΩøÁî®ÊñπÂºèÔºö

---

<details>
            <summary>Grep search for "new InitPose0Factor|InitPose0Factor.*AddResidualBlock" ‚Ä¢ **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1314 | `<summary>Grep search for "new InitPose0Factor|pose0_factor" ‚Ä¢ **11** files</summary>` |

</details>

---

<details>
            <summary>Searched codebase "InitPose0Factor usage instantiation where created" ‚Ä¢ **24** results</summary>
        
| File | Lines |
|------|-------|
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L1-29 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L32-65 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L1-54 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L3-58 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L1-32 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L54-112 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L112-120 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L103-125 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L327-358 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose_local_parameterization.cpp` | L3-27 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L1-46 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/imu_factor.cpp` | L72-104 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L264-296 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L158-200 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose_local_parameterization.h` | L3-18 |
| `rtk_visual_inertial_src/camera_models/src/camera_models/CostFunctionFactory.cc` | L1-64 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L514-563 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L168-193 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L1-53 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L526-583 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/imu_factor.cpp` | L205-232 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L294-336 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L211-248 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L53-103 |

</details>

---

<details>
            <summary>Grep search for "InitPose0Factor" ‚Ä¢ **5** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3408 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3426 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3442 | `‰∏ä‰∏ÄÊ≠• `pose0_factor.cpp` ÁöÑ‰øÆÊîπ‰∏çÊ≠£Á°Æ„ÄÇAIÈîôËØØÂú∞‰øÆÊîπ‰∫Ü `InitPose0Factor` ËÄå‰∏çÊòØ `Pose0Factor`ÔºåÂπ∂‰∏îËÆ°ÁÆóËåÉÊï∞ÁöÑÊñπÂºè‰πüÂæàÂ•áÊÄ™„ÄÇ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3503 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3832 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3834 | `InitPose0Factor() = delete;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3835 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_14-39-%E7%A1%AE%E5%AE%9A%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%E7%9A%84summary%E6%9D%A5%E6%BA%90.md` | L3890 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1020 | `‚ü™ 120 characters skipped ‚ü´rc/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1235 | `- **`InitPose0Factor`** - ÂàùÂßãÈõ∂ÁÇπÁ∫¶ÊùüÔºà4Áª¥Ôºâ` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1249 | `ËÆ©ÊàëÊü•Áúã `InitPose0Factor` ÁöÑÂÖ∑‰Ωì‰ΩøÁî®ÊÉÖÂÜµÔºåÁúãÂÆÉÊòØÂê¶Âè™Âú®ÂàùÂßãÈò∂ÊÆµÂèÇ‰∏é‰ºòÂåñÔºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1254 | `<summary>Grep search for "AddResidualBlock.*InitPose0|InitPose0Factor" ‚Ä¢ **4** files</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1258 | `‚ü™ 181 characters skipped ‚ü´%E6%9D%A5%E6%BA%90.md` | L3408 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1259 | `‚ü™ 180 characters skipped ‚ü´y%E6%9D%A5%E6%BA%90.md` | L3426 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1260 | `‚ü™ 215 characters skipped ‚ü´‰∏ä‰∏ÄÊ≠• `pose0_factor.cpp` ÁöÑ‰øÆÊîπ‰∏çÊ≠£Á°Æ„ÄÇAIÈîôËØØÂú∞‰øÆÊîπ‰∫Ü `InitPose0Factor` ËÄå‰∏çÊòØ `Pose0Factor`ÔºåÂπ∂‰∏îËÆ°ÁÆóËåÉÊï∞ÁöÑÊñπÂºè‰πüÂæàÂ•áÊÄ™„ÄÇ` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1261 | `‚ü™ 180 characters skipped ‚ü´y%E6%9D%A5%E6%BA%90.md` | L3503 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1262 | `‚ü™ 181 characters skipped ‚ü´%E6%9D%A5%E6%BA%90.md` | L3832 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1263 | `‚ü™ 175 characters skipped ‚ü´ummary%E6%9D%A5%E6%BA%90.md` | L3834 | `InitPose0Factor() = delete;` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1264 | `‚ü™ 175 characters skipped ‚ü´ummary%E6%9D%A5%E6%BA%90.md` | L3835 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1265 | `‚ü™ 180 characters skipped ‚ü´y%E6%9D%A5%E6%BA%90.md` | L3890 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1266 | `‚ü™ 121 characters skipped ‚ü´c/factor/pose0_factor.cpp` | L6 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1267 | `‚ü™ 120 characters skipped ‚ü´rc/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1268 | `‚ü™ 114 characters skipped ‚ü´tial/src/factor/pose0_factor.h` | L8 | `InitPose0Factor() = delete;` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1269 | `‚ü™ 114 characters skipped ‚ü´tial/src/factor/pose0_factor.h` | L9 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1270 | `‚ü™ 120 characters skipped ‚ü´rc/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1271 | `‚ü™ 114 characters skipped ‚ü´tial/src/factor/pose0_factor.h` | L8 | `InitPose0Factor() = delete;` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1272 | `‚ü™ 114 characters skipped ‚ü´tial/src/factor/pose0_factor.h` | L9 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1279 | `<summary>Searched codebase "InitPose0Factor usage optimization when" ‚Ä¢ **25** results</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1314 | `<summary>Grep search for "new InitPose0Factor|pose0_factor" ‚Ä¢ **11** files</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1336 | `‚ü™ 215 characters skipped ‚ü´‰∏ä‰∏ÄÊ≠• `pose0_factor.cpp` ÁöÑ‰øÆÊîπ‰∏çÊ≠£Á°Æ„ÄÇAIÈîôËØØÂú∞‰øÆÊîπ‰∫Ü `InitPose0Factor` ËÄå‰∏çÊòØ `Pose0Factor`ÔºåÂπ∂‰∏îËÆ°ÁÆóËåÉÊï∞ÁöÑÊñπÂºè‰πüÂæàÂ•áÊÄ™„ÄÇ` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1374 | `Âü∫‰∫éÊàëÁöÑËØ¶ÁªÜÂàÜÊûêÔºåÁé∞Âú®ÂèØ‰ª•ÂõûÁ≠îÊÇ®ÂÖ≥‰∫é `InitPose0Factor` ÁöÑ‰ΩøÁî®Êó∂Êú∫ÈóÆÈ¢òÔºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1376 | `## `InitPose0Factor` ÁöÑ‰ΩøÁî®Èò∂ÊÆµÂàÜÊûê` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1378 | `**Á≠îÊ°àÔºö‰∏çÊòØÁöÑÔºå`InitPose0Factor` ‰∏çÂè™Âú®ÂàùÂßãÈò∂ÊÆµÂèÇ‰∏é‰ºòÂåñ„ÄÇ**` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1388 | `‰ªé `InitPose0Factor::Evaluate` ÂáΩÊï∞ÂèØ‰ª•ÁúãÂá∫ÔºåÂÆÉÊúâ‰∏§‰∏™‰∏ªË¶ÅÁ∫¶ÊùüÔºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1409 | ``InitPose0Factor` **‰∏ç‰ªÖ‰ªÖÂú®ÂàùÂßãÂåñÈò∂ÊÆµ‰ΩøÁî®**ÔºåÂÆÉÊõ¥ÂÉèÊòØ‰∏Ä‰∏™**Êù°‰ª∂ÊÄßÁöÑÁ∫¶ÊùüÂõ†Â≠ê**ÔºåÂèØ‰ª•Ê†πÊçÆÁ≥ªÁªüÁä∂ÊÄÅÂíåÈúÄÊ±ÇÂú®‰ºòÂåñËøáÁ®ã‰∏≠ÁöÑ‰∏çÂêåÈò∂ÊÆµË¢´ÊøÄÊ¥ªÔºåÁî®‰∫éÔºö` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L6 | `bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L8 | `InitPose0Factor() = delete;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L9 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L6 | `class InitPose0Factor : public ceres::SizedCostFunction<4, 7> {` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L8 | `InitPose0Factor() = delete;` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L9 | `InitPose0Factor(const Eigen::MatrixXd Rwb, Eigen::Vector3d Pwb, bool posefix_, bool orientationfix_,` |

</details>

---

Âü∫‰∫éÊêúÁ¥¢ÁªìÊûúÔºåÊàëÂèëÁé∞‰∏Ä‰∏™ÈáçË¶ÅÈóÆÈ¢òÔºö**`InitPose0Factor` Âú®ÂΩìÂâç‰ª£Á†ÅÂ∫ì‰∏≠ÂÆûÈôÖ‰∏äÂπ∂Ê≤°ÊúâË¢´‰ΩøÁî®ÔºÅ**

ËÆ©ÊàëÁªßÁª≠Á°ÆËÆ§Ëøô‰∏ÄÁÇπÔºö

---

<details>
            <summary>Grep search for "new InitPose0Factor" ‚Ä¢ **1** files</summary>
        
| File | Line | Match |
|------|------|-------|
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1314 | `<summary>Grep search for "new InitPose0Factor|pose0_factor" ‚Ä¢ **11** files</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1431 | `<summary>Grep search for "new InitPose0Factor|InitPose0Factor.*AddResidualBlock" ‚Ä¢ **1** files</summary>` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1435 | `‚ü™ 221 characters skipped ‚ü´d` | L1314 | `<summary>Grep search for "new InitPose0Factor|pose0_factor" ‚Ä¢ **11** files</summary>` |` |
| `file:///home/lenovo/catkin_ws_debug2/src/RTK-Visual-Inertial-Navigation/.specstory/history/2025-06-17_16-54-%E6%89%BE%E5%88%B0%E7%A3%81%E5%8A%9B%E8%AE%A1%E6%AE%8B%E5%B7%AE%E7%9A%84%E8%AE%A1%E7%AE%97%E4%BD%8D%E7%BD%AE.md` | L1508 | `‚ü™ 221 characters skipped ‚ü´d` | L1314 | `<summary>Grep search for "new InitPose0Factor|pose0_factor" ‚Ä¢ **11** files</summary>` |` |

</details>

---

<details>
            <summary>Searched codebase "InitPose0Factor create instance usage optimization problem" ‚Ä¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.h` | L1-29 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L32-65 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L1-54 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.h` | L3-58 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp` | L1-32 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L327-358 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L103-125 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/marginalization_factor.cpp` | L294-336 |
| `ceres-solver-modified/examples/slam/pose_graph_3d/pose_graph_3d.cc` | L50-92 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L476-514 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L54-112 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L109-151 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L211-248 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L168-193 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp` | L514-563 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf.cpp` | L3-54 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L287-327 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/initial_factor.cpp` | L112-120 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L53-103 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L2-43 |
| `rtk_visual_inertial_src/camera_models/src/calib/CameraCalibration.cc` | L467-510 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.cpp` | L526-583 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose_local_parameterization.cpp` | L3-27 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/projection_factor.cpp` | L1-46 |
| `rtk_visual_inertial_src/rtk_visual_inertial/src/factor/gnss_imu_factor.h` | L43-74 |

</details>

---

Âü∫‰∫éÊàëÁöÑÂÖ®Èù¢ÊêúÁ¥¢ÂíåÂàÜÊûêÔºåÁé∞Âú®ÂèØ‰ª•ÊòéÁ°ÆÂõûÁ≠îÊÇ®ÁöÑÈóÆÈ¢òÔºö

## `InitPose0Factor` ÊÆãÂ∑ÆËÆ°ÁÆó‰ΩçÁΩÆÂàÜÊûê

### **ÈáçË¶ÅÂèëÁé∞Ôºö`InitPose0Factor` ÂÆûÈôÖ‰∏äÂπ∂Êú™Ë¢´‰ΩøÁî®ÔºÅ**

ÈÄöËøáÂØπÊï¥‰∏™‰ª£Á†ÅÂ∫ìÁöÑËØ¶ÁªÜÊêúÁ¥¢ÔºåÊàëÂèëÁé∞‰∫Ü‰∏Ä‰∏™ÂÖ≥ÈîÆ‰∫ãÂÆûÔºö

**`InitPose0Factor` Âú®ÂΩìÂâçÁöÑ‰ª£Á†ÅÂ∫ì‰∏≠‰ªÖ‰ªÖÊòØË¢´ÂÆö‰πâ‰∫ÜÔºå‰ΩÜÂÆûÈôÖ‰∏äÂπ∂Ê≤°ÊúâÂú®‰ªª‰ΩïÂú∞ÊñπË¢´ÂàõÂª∫Âíå‰ΩøÁî®ÔºÅ**

### **ËØÅÊçÆÔºö**

1. **Ê≤°ÊúâÊâæÂà∞‰ªª‰Ωï `new InitPose0Factor` ÁöÑÂÆû‰æãÂåñ‰ª£Á†Å**
2. **Ê≤°ÊúâÊâæÂà∞‰ªª‰ΩïÂ∞Ü `InitPose0Factor` Ê∑ªÂä†Âà∞‰ºòÂåñÈóÆÈ¢òÁöÑ‰ª£Á†Å**
3. **`pose0_factor.h` Âíå `pose0_factor.cpp` Âè™ÊòØÂÆö‰πâ‰∫ÜÁ±ªÔºå‰ΩÜÊ≤°ÊúâË¢´Ë∞ÉÁî®**

### **ÊÆãÂ∑ÆËÆ°ÁÆó‰ΩçÁΩÆÔºö**

Â∞ΩÁÆ° `InitPose0Factor` Ê≤°ÊúâË¢´‰ΩøÁî®Ôºå‰ΩÜÂÖ∂ÊÆãÂ∑ÆËÆ°ÁÆóÈÄªËæëÂú® ```6:20:rtk_visual_inertial_src/rtk_visual_inertial/src/factor/pose0_factor.cpp``` ‰∏≠ÂÆö‰πâÔºö

```cpp
bool InitPose0Factor::Evaluate(double const* const* parameters, double* residuals, double** jacobians) const {
    Eigen::Vector3d Pwb(parameters[0][0], parameters[0][1], parameters[0][2]);
    Eigen::Quaterniond Qwb(parameters[0][6], parameters[0][3], parameters[0][4], parameters[0][5]);
    Eigen::Vector3d Magw1 = Rwgw.transpose() * Qwb * Mag;
    double mag1_2_norm = Magw1.segment(0, 2).norm();
    
    if (posefix) {
        residuals[0] = (Pwb.x() - InitPwb.x()) * sqrt_info;
        residuals[1] = (Pwb.y() - InitPwb.y()) * sqrt_info;
        residuals[2] = (Pwb.z() - InitPwb.z()) * sqrt_info;
    }
    if (orientationfix) {
        residuals[3] = Magw1(0) / mag1_2_norm * sqrt_info;
    }
}
```

### **ÂÆûÈôÖ‰ΩøÁî®ÁöÑÁ±ª‰ººÂäüËÉΩÔºö**

ËôΩÁÑ∂ `InitPose0Factor` Ê≤°ÊúâË¢´‰ΩøÁî®Ôºå‰ΩÜÁ±ª‰ººÁöÑÂàùÂßãÁ∫¶ÊùüÂäüËÉΩÈÄöËøá‰ª•‰∏ãÂõ†Â≠êÂÆûÁé∞Ôºö

1. **`InitialPoseFactor`** - 6Áª¥‰ΩçÂßøÁ∫¶Êùü
2. **`InitialBiasFactor`** - 9Áª¥ÂÅèÁΩÆÁ∫¶Êùü  
3. **`InitialFactor33`** - 3Áª¥ÂêëÈáèÁ∫¶Êùü
4. **`InitialBlackFactor`** - 1Áª¥ËôöÊãüÁ∫¶Êùü

Ëøô‰∫õÂõ†Â≠êÂú® ```489:493:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp``` ÁöÑ `InitializeSqrtInfo()` ÂáΩÊï∞‰∏≠Ë¢´ÂÆûÈôÖ‰ΩøÁî®„ÄÇ

### **ÁªìËÆ∫Ôºö**

**`InitPose0Factor` ÁöÑÊÆãÂ∑ÆËôΩÁÑ∂Âú®‰ª£Á†Å‰∏≠Ë¢´ÂÆö‰πâÂíåËÆ°ÁÆóÔºå‰ΩÜÂú®ÂÆûÈôÖÁöÑ‰ºòÂåñËøáÁ®ã‰∏≠Âπ∂‰∏ç‰ºöË¢´ÊâßË°åÔºåÂõ†‰∏∫Ëøô‰∏™Âõ†Â≠ê‰ªéÊù•Ê≤°ÊúâË¢´ÂàõÂª∫ÂíåÊ∑ªÂä†Âà∞‰ºòÂåñÈóÆÈ¢ò‰∏≠„ÄÇ** ÂÆÉÂèØËÉΩÊòØ‰∏Ä‰∏™È¢ÑÁïôÁöÑÂäüËÉΩÊàñËÄÖÊó©ÊúüÁâàÊú¨ÁöÑÈÅóÁïô‰ª£Á†Å„ÄÇ

---

_**User**_

ÈáçÊñ∞ÊÄªÁªìÂõ†Â≠êÂõæ‰ºòÂåñÁî®Âà∞ÁöÑÊÆãÂ∑Æ

---

_**Assistant**_

Âü∫‰∫éÂØπ‰ª£Á†ÅÂ∫ìÁöÑÂÖ®Èù¢ÂàÜÊûêÔºåÊàëÈáçÊñ∞ÊÄªÁªìÂõ†Â≠êÂõæ‰ºòÂåñ‰∏≠ÂÆûÈôÖ‰ΩøÁî®ÁöÑÊÆãÂ∑ÆÁ±ªÂûãÔºö

## Âõ†Â≠êÂõæ‰ºòÂåñ‰∏≠ÂÆûÈôÖ‰ΩøÁî®ÁöÑÊÆãÂ∑ÆÊÄªÁªì

### **1. IMUÁõ∏ÂÖ≥ÊÆãÂ∑Æ** ‚úÖ

**IMUÈ¢ÑÁßØÂàÜÊÆãÂ∑Æ:**
- **`IMUFactor`** - 15Áª¥ÊÆãÂ∑ÆÔºà‰ΩçÁΩÆ3+ÊóãËΩ¨3+ÈÄüÂ∫¶3+Âä†ÈÄüÂ∫¶ÂÅèÁΩÆ3+ÈôÄËû∫ÂÅèÁΩÆ3Ôºâ
- **‰ΩçÁΩÆ:** ```186:190:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp```

**IMU-GNSSËÅîÂêàÊÆãÂ∑Æ:**
- **`IMUGNSSFactor`** - Âä®ÊÄÅÁª¥Êï∞ÊÆãÂ∑ÆÔºà‰∏ªË¶ÅÁöÑGNSSËßÇÊµãÊÆãÂ∑ÆËûçÂêàÊñπÂºèÔºâ
- **‰ΩçÁΩÆ:** ```250:260:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

### **2. ËßÜËßâÈáçÊäïÂΩ±ÊÆãÂ∑Æ** ‚úÖ

**Â§öÁßçÈáçÊäïÂΩ±Âõ†Â≠ê:**
- **`projection_factor`** - Âü∫Á°ÄÈáçÊäïÂΩ±Âõ†Â≠êÔºà2Áª¥Ôºâ
- **`ProjectionTwoFrameOneCamFactor`** - ÂèåÂ∏ßÂçïÁõ∏Êú∫ÈáçÊäïÂΩ±Ôºà2Áª¥Ôºâ
- **`ProjectionTwoFrameTwoCamFactor`** - ÂèåÂ∏ßÂèåÁõ∏Êú∫ÈáçÊäïÂΩ±Ôºà2Áª¥Ôºâ  
- **`ProjectionOneFrameTwoCamFactor`** - ÂçïÂ∏ßÂèåÁõ∏Êú∫ÈáçÊäïÂΩ±Ôºà2Áª¥Ôºâ

**‰ΩçÁΩÆ:** ```83:104:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_image.cpp```

### **3. GNSSËßÇÊµãÊÆãÂ∑Æ** ‚úÖ

**Áã¨Á´ãGNSSÊÆãÂ∑ÆÔºàÂΩì‰∏ç‰ΩøÁî®IMU-GNSSËÅîÂêàÊó∂Ôºâ:**
- **`RTKCarrierPhaseFactor`** - RTKËΩΩÊ≥¢Áõ∏‰ΩçÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`RTKPseudorangeFactor`** - RTK‰º™Ë∑ùÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`SppPseudorangeFactor`** - SPP‰º™Ë∑ùÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`SppCarrierPhaseFactor`** - SPPËΩΩÊ≥¢Áõ∏‰ΩçÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`SppDopplerFactor`** - SPPÂ§öÊôÆÂãíÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **`FixedIntegerFactor`** - Êï¥Êï∞Á∫¶ÊùüÊÆãÂ∑ÆÔºà1Áª¥Ôºâ

**‰ΩçÁΩÆ:** ```Âú®swf_gnss.cppÂíågnss_factor.cpp‰∏≠ÂÆö‰πâÂíå‰ΩøÁî®```

### **4. ËæπÁºòÂåñÂÖàÈ™åÊÆãÂ∑Æ** ‚úÖ

**ÊªëÂä®Á™óÂè£ËæπÁºòÂåñ:**
- **`MarginalizationFactor`** - ÂÖàÈ™å‰ø°ÊÅØÊÆãÂ∑ÆÔºàÂä®ÊÄÅÁª¥Êï∞Ôºâ
- **‰ΩçÁΩÆ:** ```391:391:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

### **5. ÂàùÂßãÂåñÁ∫¶ÊùüÊÆãÂ∑Æ** ‚úÖ

**Á≥ªÁªüÂàùÂßãÂåñÊó∂‰ΩøÁî®:**
- **`InitialPoseFactor`** - ÂàùÂßã‰ΩçÂßøÁ∫¶ÊùüÔºà6Áª¥Ôºâ
- **`InitialBiasFactor`** - ÂàùÂßãÂÅèÁΩÆÁ∫¶ÊùüÔºà9Áª¥Ôºâ
- **`InitialFactor33`** - 3Áª¥ÂêëÈáèÁ∫¶ÊùüÔºà3Áª¥Ôºâ
- **`InitialFactor11`** - Ê†áÈáèÁ∫¶ÊùüÔºà1Áª¥Ôºâ
- **`InitialBlackFactor`** - ËôöÊãüÁ∫¶ÊùüÂõ†Â≠êÔºà1Áª¥Ôºâ

**‰ΩçÁΩÆ:** ```489:493:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_core.cpp```

### **6. Á£ÅÂäõËÆ°ÊÆãÂ∑Æ** ‚ùå (ÈªòËÆ§ÂÖ≥Èó≠)

- **`MAGFactor`** - Á£ÅÂäõËÆ°ÂÅèËà™Ê†°Ê≠£ÊÆãÂ∑ÆÔºà1Áª¥Ôºâ
- **Áä∂ÊÄÅ:** Áî±‰∫é `USE_MAG_CORRECT_YAW: 0`ÔºåÈªòËÆ§‰∏çÂèÇ‰∏é‰ºòÂåñ
- **‰ΩçÁΩÆ:** ```238:242:rtk_visual_inertial_src/rtk_visual_inertial/src/swf/swf_imu.cpp```

### **‚ùå ‰∏ç‰ΩøÁî®ÁöÑÊÆãÂ∑Æ**

**ÁªèËøáÈ™åËØÅÔºå‰ª•‰∏ãÂõ†Â≠êËôΩÁÑ∂Ë¢´ÂÆö‰πâ‰ΩÜÂÆûÈôÖ‰∏ç‰ΩøÁî®:**
- **`InitPose0Factor`** - ÂàùÂßãÈõ∂ÁÇπÁ∫¶ÊùüÔºà4Áª¥Ôºâ- **Êú™ÊâæÂà∞‰ªª‰ΩïÂÆû‰æãÂåñ‰ª£Á†Å**

## **ÊÆãÂ∑Æ‰ΩøÁî®ÁöÑÈÖçÁΩÆ‰æùËµñ**

1. **IMUÊÆãÂ∑Æ** - ÂΩì `USE_IMU: 1` Êó∂ÂêØÁî®
2. **ËßÜËßâÊÆãÂ∑Æ** - ÂßãÁªàÂêØÁî®ÔºàÊ†∏ÂøÉÂäüËÉΩÔºâ
3. **GNSSÊÆãÂ∑Æ** - Ê†πÊçÆGNSSÊï∞ÊçÆÂèØÁî®ÊÄßÂíåÊ®°ÂºèÈÄâÊã©
4. **Á£ÅÂäõËÆ°ÊÆãÂ∑Æ** - ÂΩì `USE_MAG_CORRECT_YAW: 1` Êó∂ÂêØÁî®
5. **ËæπÁºòÂåñÊÆãÂ∑Æ** - ÊªëÂä®Á™óÂè£‰ºòÂåñÊó∂Ëá™Âä®ÁîüÊàê
6. **ÂàùÂßãÂåñÊÆãÂ∑Æ** - Á≥ªÁªüÂàùÂßãÂåñÈò∂ÊÆµ‰ΩøÁî®

## **ÊÄªÁªì**

**ÂÆûÈôÖÂèÇ‰∏é‰ºòÂåñÁöÑÊÆãÂ∑ÆÁ±ªÂûãÁ∫¶‰∏∫5-6Â§ßÁ±ªÔºåÂåÖÂê´15-20ÁßçÂÖ∑‰ΩìÁöÑÊÆãÂ∑ÆÂõ†Â≠ê**ÔºåÂÖ∑‰ΩìÊï∞ÈáèÂèñÂÜ≥‰∫éÈÖçÁΩÆÂèÇÊï∞ÂíåÊï∞ÊçÆÂèØÁî®ÊÄß„ÄÇÂÖ∂‰∏≠ËßÜËßâÈáçÊäïÂΩ±ÊÆãÂ∑ÆÂíåIMUÈ¢ÑÁßØÂàÜÊÆãÂ∑ÆÊòØÁ≥ªÁªüÁöÑÊ†∏ÂøÉÔºåGNSSÊÆãÂ∑Æ‰∏ªË¶ÅÈÄöËøáIMU-GNSSËÅîÂêàÂõ†Â≠êÁöÑÂΩ¢ÂºèÂèÇ‰∏é‰ºòÂåñ„ÄÇ

---

